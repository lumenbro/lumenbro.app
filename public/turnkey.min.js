/*! For license information please see turnkey.min.js.LICENSE.txt */
(()=>{var t,e,i,r,n={251:(t,e)=>{e.read=function(t,e,i,r,n){var s,a,o=8*n-r-1,u=(1<<o)-1,c=u>>1,f=-7,h=i?n-1:0,l=i?-1:1,p=t[e+h];for(h+=l,s=p&(1<<-f)-1,p>>=-f,f+=o;f>0;s=256*s+t[e+h],h+=l,f-=8);for(a=s&(1<<-f)-1,s>>=-f,f+=r;f>0;a=256*a+t[e+h],h+=l,f-=8);if(0===s)s=1-c;else{if(s===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),s-=c}return(p?-1:1)*a*Math.pow(2,s-r)},e.write=function(t,e,i,r,n,s){var a,o,u,c=8*s-n-1,f=(1<<c)-1,h=f>>1,l=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:s-1,d=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+h>=1?l/u:l*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=f?(o=0,a=f):a+h>=1?(o=(e*u-1)*Math.pow(2,n),a+=h):(o=e*Math.pow(2,h-1)*Math.pow(2,n),a=0));n>=8;t[i+p]=255&o,p+=d,o/=256,n-=8);for(a=a<<n|o,c+=n;c>0;t[i+p]=255&a,p+=d,a/=256,c-=8);t[i+p-d]|=128*y}},410:(t,e,i)=>{"use strict";i.d(e,{n:()=>s});const r=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],n={sha256:1};function s(t){if(t&&!n[t]&&!n[t.toLowerCase()])throw new Error("Digest method not supported");return new a}class a{constructor(){this.A=1779033703,this.B=-1150833019,this.C=1013904242,this.D=-1521486534,this.E=1359893119,this.F=-1694144372,this.G=528734635,this.H=1541459225,this._size=0,this._sp=0,(!u||c>=8e3)&&(u=new ArrayBuffer(8e3),c=0),this._byte=new Uint8Array(u,c,80),this._word=new Int32Array(u,c,20),c+=80}update(t){if("string"==typeof t)return this._utf8(t);if(null==t)throw new TypeError("Invalid type: "+typeof t);const e=t.byteOffset,i=t.byteLength;let r=i/64|0,n=0;if(r&&!(3&e)&&!(this._size%64)){const i=new Int32Array(t.buffer,e,16*r);for(;r--;)this._int32(i,n>>2),n+=64;this._size+=n}if(1!==t.BYTES_PER_ELEMENT&&t.buffer){const r=new Uint8Array(t.buffer,e+n,i-n);return this._uint8(r)}return n===i?this:this._uint8(t,n)}_uint8(t,e){const{_byte:i,_word:r}=this,n=t.length;for(e|=0;e<n;){const s=this._size%64;let a=s;for(;e<n&&a<64;)i[a++]=t[e++];a>=64&&this._int32(r),this._size+=a-s}return this}_utf8(t){const{_byte:e,_word:i}=this,r=t.length;let n=this._sp;for(let s=0;s<r;){const a=this._size%64;let o=a;for(;s<r&&o<64;){let i=0|t.charCodeAt(s++);i<128?e[o++]=i:i<2048?(e[o++]=192|i>>>6,e[o++]=128|63&i):i<55296||i>57343?(e[o++]=224|i>>>12,e[o++]=128|i>>>6&63,e[o++]=128|63&i):n?(i=((1023&n)<<10)+(1023&i)+65536,e[o++]=240|i>>>18,e[o++]=128|i>>>12&63,e[o++]=128|i>>>6&63,e[o++]=128|63&i,n=0):n=i}o>=64&&(this._int32(i),i[0]=i[16]),this._size+=o-a}return this._sp=n,this}_int32(t,e){let{A:i,B:n,C:s,D:a,E:u,F:c,G:f,H:b}=this,w=0;for(e|=0;w<16;)o[w++]=h(t[e++]);for(w=16;w<64;w++)o[w]=m(o[w-2])+o[w-7]+g(o[w-15])+o[w-16]|0;for(w=0;w<64;w++){const t=b+y(u)+l(u,c,f)+r[w]+o[w]|0,e=d(i)+p(i,n,s)|0;b=f,f=c,c=u,u=a+t|0,a=s,s=n,n=i,i=t+e|0}this.A=i+this.A|0,this.B=n+this.B|0,this.C=s+this.C|0,this.D=a+this.D|0,this.E=u+this.E|0,this.F=c+this.F|0,this.G=f+this.G|0,this.H=b+this.H|0}digest(t){const{_byte:e,_word:i}=this;let r=this._size%64|0;for(e[r++]=128;3&r;)e[r++]=0;if(r>>=2,r>14){for(;r<16;)i[r++]=0;r=0,this._int32(i)}for(;r<16;)i[r++]=0;const n=8*this._size,s=(4294967295&n)>>>0,a=(n-s)/4294967296;return a&&(i[14]=h(a)),s&&(i[15]=h(s)),this._int32(i),"hex"===t?this._hex():this._bin()}_hex(){const{A:t,B:e,C:i,D:r,E:n,F:s,G:a,H:o}=this;return f(t)+f(e)+f(i)+f(r)+f(n)+f(s)+f(a)+f(o)}_bin(){const{A:t,B:e,C:i,D:r,E:n,F:s,G:a,H:o,_byte:u,_word:c}=this;return c[0]=h(t),c[1]=h(e),c[2]=h(i),c[3]=h(r),c[4]=h(n),c[5]=h(s),c[6]=h(a),c[7]=h(o),u.slice(0,32)}}const o=new Int32Array(64);let u,c=0;const f=t=>(t+4294967296).toString(16).substr(-8),h=254===new Uint8Array(new Uint16Array([65279]).buffer)[0]?t=>t:t=>t<<24&4278190080|t<<8&16711680|t>>8&65280|t>>24&255,l=(t,e,i)=>i^t&(e^i),p=(t,e,i)=>t&e|i&(t|e),d=t=>(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),y=t=>(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7),g=t=>(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3,m=t=>(t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10},615:(t,e,i)=>{"use strict";i.d(e,{Ak:()=>u,UT:()=>I,Xf:()=>b,fH:()=>m,hT:()=>g,u0:()=>o});var r=i(1848),n=i(8030);const s=BigInt(0),a=BigInt(1);function o(t,e){const i=e.negate();return t?i:e}function u(t,e){const i=(0,n.pS)(t.Fp,e.map(t=>t.Z));return e.map((e,r)=>t.fromAffine(e.toAffine(i[r])))}function c(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function f(t,e){c(t,e);const i=2**t;return{windows:Math.ceil(e/t)+1,windowSize:2**(t-1),mask:(0,r.OG)(t),maxNumber:i,shiftBy:BigInt(t)}}function h(t,e,i){const{windowSize:r,mask:n,maxNumber:s,shiftBy:o}=i;let u=Number(t&n),c=t>>o;u>r&&(u-=s,c+=a);const f=e*r;return{nextN:c,offset:f+Math.abs(u)-1,isZero:0===u,isNeg:u<0,isNegF:e%2!=0,offsetF:f}}const l=new WeakMap,p=new WeakMap;function d(t){return p.get(t)||1}function y(t){if(t!==s)throw new Error("invalid wNAF")}class g{constructor(t,e){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=e}_unsafeLadder(t,e,i=this.ZERO){let r=t;for(;e>s;)e&a&&(i=i.add(r)),r=r.double(),e>>=a;return i}precomputeWindow(t,e){const{windows:i,windowSize:r}=f(e,this.bits),n=[];let s=t,a=s;for(let t=0;t<i;t++){a=s,n.push(a);for(let t=1;t<r;t++)a=a.add(s),n.push(a);s=a.double()}return n}wNAF(t,e,i){if(!this.Fn.isValid(i))throw new Error("invalid scalar");let r=this.ZERO,n=this.BASE;const s=f(t,this.bits);for(let t=0;t<s.windows;t++){const{nextN:a,offset:u,isZero:c,isNeg:f,isNegF:l,offsetF:p}=h(i,t,s);i=a,c?n=n.add(o(l,e[p])):r=r.add(o(f,e[u]))}return y(i),{p:r,f:n}}wNAFUnsafe(t,e,i,r=this.ZERO){const n=f(t,this.bits);for(let t=0;t<n.windows&&i!==s;t++){const{nextN:s,offset:a,isZero:o,isNeg:u}=h(i,t,n);if(i=s,!o){const t=e[a];r=r.add(u?t.negate():t)}}return y(i),r}getPrecomputes(t,e,i){let r=l.get(e);return r||(r=this.precomputeWindow(e,t),1!==t&&("function"==typeof i&&(r=i(r)),l.set(e,r))),r}cached(t,e,i){const r=d(t);return this.wNAF(r,this.getPrecomputes(r,t,i),e)}unsafe(t,e,i,r){const n=d(t);return 1===n?this._unsafeLadder(t,e,r):this.wNAFUnsafe(n,this.getPrecomputes(n,t,i),e,r)}createCache(t,e){c(e,this.bits),p.set(t,e),l.delete(t)}hasCache(t){return 1!==d(t)}}function m(t,e,i,r){let n=e,o=t.ZERO,u=t.ZERO;for(;i>s||r>s;)i&a&&(o=o.add(n)),r&a&&(u=u.add(n)),n=n.double(),i>>=a,r>>=a;return{p1:o,p2:u}}function b(t,e,i,n){(function(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((t,i)=>{if(!(t instanceof e))throw new Error("invalid point at index "+i)})})(i,t),function(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((t,i)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+i)})}(n,e);const s=i.length,a=n.length;if(s!==a)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,u=(0,r.dJ)(BigInt(s));let c=1;u>12?c=u-3:u>4?c=u-2:u>0&&(c=2);const f=(0,r.OG)(c),h=new Array(Number(f)+1).fill(o);let l=o;for(let t=Math.floor((e.BITS-1)/c)*c;t>=0;t-=c){h.fill(o);for(let e=0;e<a;e++){const r=n[e],s=Number(r>>BigInt(t)&f);h[s]=h[s].add(i[e])}let e=o;for(let t=h.length-1,i=o;t>0;t--)i=i.add(h[t]),e=e.add(i);if(l=l.add(e),0!==t)for(let t=0;t<c;t++)l=l.double()}return l}function w(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return(0,n.jr)(e),e}return(0,n.D0)(t)}function I(t,e,i={}){if(!e||"object"!=typeof e)throw new Error(`expected valid ${t} CURVE object`);for(const t of["p","n","h"]){const i=e[t];if(!("bigint"==typeof i&&i>s))throw new Error(`CURVE.${t} must be positive bigint`)}const r=w(e.p,i.Fp),n=w(e.n,i.Fn),a=["Gx","Gy","a","weierstrass"===t?"b":"d"];for(const t of a)if(!r.isValid(e[t]))throw new Error(`CURVE.${t} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:n}}},1307:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>r});const r=function(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let t=0;t<e.length;t++)e[t]=255;for(let i=0;i<t.length;i++){const r=t.charAt(i),n=r.charCodeAt(0);if(255!==e[n])throw new TypeError(r+" is ambiguous");e[n]=i}const i=t.length,r=t.charAt(0),n=Math.log(i)/Math.log(256),s=Math.log(256)/Math.log(i);function a(t){if("string"!=typeof t)throw new TypeError("Expected String");if(0===t.length)return new Uint8Array;let s=0,a=0,o=0;for(;t[s]===r;)a++,s++;const u=(t.length-s)*n+1>>>0,c=new Uint8Array(u);for(;s<t.length;){const r=t.charCodeAt(s);if(r>255)return;let n=e[r];if(255===n)return;let a=0;for(let t=u-1;(0!==n||a<o)&&-1!==t;t--,a++)n+=i*c[t]>>>0,c[t]=n%256>>>0,n=n/256>>>0;if(0!==n)throw new Error("Non-zero carry");o=a,s++}let f=u-o;for(;f!==u&&0===c[f];)f++;const h=new Uint8Array(a+(u-f));let l=a;for(;f!==u;)h[l++]=c[f++];return h}return{encode:function(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===e.length)return"";let n=0,a=0,o=0;const u=e.length;for(;o!==u&&0===e[o];)o++,n++;const c=(u-o)*s+1>>>0,f=new Uint8Array(c);for(;o!==u;){let t=e[o],r=0;for(let e=c-1;(0!==t||r<a)&&-1!==e;e--,r++)t+=256*f[e]>>>0,f[e]=t%i>>>0,t=t/i>>>0;if(0!==t)throw new Error("Non-zero carry");a=r,o++}let h=c-a;for(;h!==c&&0===f[h];)h++;let l=r.repeat(n);for(;h<c;++h)l+=t.charAt(f[h]);return l},decodeUnsafe:a,decode:function(t){const e=a(t);if(e)return e;throw new Error("Non-base"+i+" character")}}}("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},1454:(t,e,i)=>{"use strict";i.d(e,{w:()=>s});var r=i(2531);class n extends r.Vw{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,(0,r.sd)(t);const i=(0,r.ZJ)(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,s=new Uint8Array(n);s.set(i.length>n?t.create().update(i).digest():i);for(let t=0;t<s.length;t++)s[t]^=54;this.iHash.update(s),this.oHash=t.create();for(let t=0;t<s.length;t++)s[t]^=106;this.oHash.update(s),(0,r.uH)(s)}update(t){return(0,r.CC)(this),this.iHash.update(t),this}digestInto(t){(0,r.CC)(this),(0,r.DO)(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:i,finished:r,destroyed:n,blockLen:s,outputLen:a}=this;return t.finished=r,t.destroyed=n,t.blockLen=s,t.outputLen=a,t.oHash=e._cloneInto(t.oHash),t.iHash=i._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const s=(t,e,i)=>new n(t,e).update(i).digest();s.create=(t,e)=>new n(t,e)},1848:(t,e,i)=>{"use strict";i.d(e,{DS:()=>I,OG:()=>b,Ph:()=>c,aK:()=>g,dJ:()=>m,e8:()=>a,ex:()=>d,fg:()=>w,lX:()=>f,lq:()=>h,qj:()=>p,x:()=>E,z:()=>l,zW:()=>o});var r=i(2531);const n=BigInt(0),s=BigInt(1);function a(t,e){if("boolean"!=typeof e)throw new Error(t+" boolean expected, got "+e)}function o(t){const e=t.toString(16);return 1&e.length?"0"+e:e}function u(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return""===t?n:BigInt("0x"+t)}function c(t){return u((0,r.My)(t))}function f(t){return(0,r.DO)(t),u((0,r.My)(Uint8Array.from(t).reverse()))}function h(t,e){return(0,r.aT)(t.toString(16).padStart(2*e,"0"))}function l(t,e){return h(t,e).reverse()}function p(t,e,i){let n;if("string"==typeof e)try{n=(0,r.aT)(e)}catch(e){throw new Error(t+" must be hex string or Uint8Array, cause: "+e)}else{if(!(0,r.aY)(e))throw new Error(t+" must be hex string or Uint8Array");n=Uint8Array.from(e)}const s=n.length;if("number"==typeof i&&s!==i)throw new Error(t+" of length "+i+" expected, got "+s);return n}function d(t,e){if(t.length!==e.length)return!1;let i=0;for(let r=0;r<t.length;r++)i|=t[r]^e[r];return 0===i}const y=t=>"bigint"==typeof t&&n<=t;function g(t,e,i,r){if(!function(t,e,i){return y(t)&&y(e)&&y(i)&&e<=t&&t<i}(e,i,r))throw new Error("expected valid "+t+": "+i+" <= n < "+r+", got "+e)}function m(t){let e;for(e=0;t>n;t>>=s,e+=1);return e}const b=t=>(s<<BigInt(t))-s;function w(t,e,i){if("number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!=typeof i)throw new Error("hmacFn must be a function");const n=t=>new Uint8Array(t),s=t=>Uint8Array.of(t);let a=n(t),o=n(t),u=0;const c=()=>{a.fill(1),o.fill(0),u=0},f=(...t)=>i(o,a,...t),h=(t=n(0))=>{o=f(s(0),t),a=f(),0!==t.length&&(o=f(s(1),t),a=f())},l=()=>{if(u++>=1e3)throw new Error("drbg: tried 1000 values");let t=0;const i=[];for(;t<e;){a=f();const e=a.slice();i.push(e),t+=a.length}return(0,r.Id)(...i)};return(t,e)=>{let i;for(c(),h(t);!(i=e(l()));)h();return c(),i}}function I(t,e,i={}){if(!t||"object"!=typeof t)throw new Error("expected valid options object");function r(e,i,r){const n=t[e];if(r&&void 0===n)return;const s=typeof n;if(s!==i||null===n)throw new Error(`param "${e}" is invalid: expected ${i}, got ${s}`)}Object.entries(e).forEach(([t,e])=>r(t,e,!1)),Object.entries(i).forEach(([t,e])=>r(t,e,!0))}function E(t){const e=new WeakMap;return(i,...r)=>{const n=e.get(i);if(void 0!==n)return n;const s=t(i,...r);return e.set(i,s),s}}},2531:(t,e,i)=>{"use strict";i.d(e,{Vw:()=>T,DO:()=>a,CC:()=>u,sd:()=>o,Fe:()=>s,Ht:()=>c,My:()=>b,uH:()=>h,Id:()=>v,qj:()=>S,O8:()=>l,xS:()=>B,aT:()=>E,aY:()=>n,po:()=>O,Ow:()=>p,fd:()=>y,ZJ:()=>A,DH:()=>f,AI:()=>_});const r="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function n(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function s(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function a(t,...e){if(!n(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function o(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.createHasher");s(t.outputLen),s(t.blockLen)}function u(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function c(t,e){a(t);const i=e.outputLen;if(t.length<i)throw new Error("digestInto() expects output buffer of length at least "+i)}function f(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function h(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function l(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function p(t,e){return t<<32-e|t>>>e}function d(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const y=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])()?t=>t:function(t){for(let e=0;e<t.length;e++)t[e]=d(t[e]);return t},g=(()=>"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex)(),m=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function b(t){if(a(t),g)return t.toHex();let e="";for(let i=0;i<t.length;i++)e+=m[t[i]];return e}const w={_0:48,_9:57,A:65,F:70,a:97,f:102};function I(t){return t>=w._0&&t<=w._9?t-w._0:t>=w.A&&t<=w.F?t-(w.A-10):t>=w.a&&t<=w.f?t-(w.a-10):void 0}function E(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);if(g)return Uint8Array.fromHex(t);const e=t.length,i=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(i);for(let e=0,n=0;e<i;e++,n+=2){const i=I(t.charCodeAt(n)),s=I(t.charCodeAt(n+1));if(void 0===i||void 0===s){const e=t[n]+t[n+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+n)}r[e]=16*i+s}return r}function _(t){if("string"!=typeof t)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(t))}function A(t){return"string"==typeof t&&(t=_(t)),a(t),t}function v(...t){let e=0;for(let i=0;i<t.length;i++){const r=t[i];a(r),e+=r.length}const i=new Uint8Array(e);for(let e=0,r=0;e<t.length;e++){const n=t[e];i.set(n,r),r+=n.length}return i}class T{}function S(t){const e=e=>t().update(A(e)).digest(),i=t();return e.outputLen=i.outputLen,e.blockLen=i.blockLen,e.create=()=>t(),e}function B(t){const e=(e,i)=>t(i).update(A(e)).digest(),i=t({});return e.outputLen=i.outputLen,e.blockLen=i.blockLen,e.create=e=>t(e),e}function O(t=32){if(r&&"function"==typeof r.getRandomValues)return r.getRandomValues(new Uint8Array(t));if(r&&"function"==typeof r.randomBytes)return Uint8Array.from(r.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}},4840:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>s});var r=i(8226),n=i(1307);const s=function(t){function e(e){var i=e.slice(0,-4),r=e.slice(-4),n=t(i);if(!(r[0]^n[0]|r[1]^n[1]|r[2]^n[2]|r[3]^n[3]))return i}return{encode:function(e){var i=Uint8Array.from(e),r=t(i),s=i.length+4,a=new Uint8Array(s);return a.set(i,0),a.set(r.subarray(0,4),i.length),n.default.encode(a)},decode:function(t){var i=e(n.default.decode(t));if(null==i)throw new Error("Invalid checksum");return i},decodeUnsafe:function(t){var i=n.default.decodeUnsafe(t);if(null!=i)return e(i)}}}(function(t){return(0,r.sc)((0,r.sc)(t))})},4945:(t,e,i)=>{var r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==i.g&&i.g,n=function(){function t(){this.fetch=!1,this.DOMException=r.DOMException}return t.prototype=r,new t}();!function(t){!function(e){var r=void 0!==t&&t||"undefined"!=typeof self&&self||void 0!==i.g&&i.g||{},n="URLSearchParams"in r,s="Symbol"in r&&"iterator"in Symbol,a="FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(t){return!1}}(),o="FormData"in r,u="ArrayBuffer"in r;if(u)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(t){return t&&c.indexOf(Object.prototype.toString.call(t))>-1};function h(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError('Invalid character in header field name: "'+t+'"');return t.toLowerCase()}function l(t){return"string"!=typeof t&&(t=String(t)),t}function p(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return s&&(e[Symbol.iterator]=function(){return e}),e}function d(t){this.map={},t instanceof d?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){if(2!=t.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+t.length);this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function y(t){if(!t._noBody)return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function g(t){return new Promise(function(e,i){t.onload=function(){e(t.result)},t.onerror=function(){i(t.error)}})}function m(t){var e=new FileReader,i=g(e);return e.readAsArrayBuffer(t),i}function b(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function w(){return this.bodyUsed=!1,this._initBody=function(t){var e;this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:a&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:o&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:n&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():u&&a&&(e=t)&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=b(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u&&(ArrayBuffer.prototype.isPrototypeOf(t)||f(t))?this._bodyArrayBuffer=b(t):this._bodyText=t=Object.prototype.toString.call(t):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a&&(this.blob=function(){var t=y(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer)return y(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer));if(a)return this.blob().then(m);throw new Error("could not read as ArrayBuffer")},this.text=function(){var t,e,i,r,n,s=y(this);if(s)return s;if(this._bodyBlob)return t=this._bodyBlob,i=g(e=new FileReader),n=(r=/charset=([A-Za-z0-9_-]+)/.exec(t.type))?r[1]:"utf-8",e.readAsText(t,n),i;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),i=new Array(e.length),r=0;r<e.length;r++)i[r]=String.fromCharCode(e[r]);return i.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(t,e){t=h(t),e=l(e);var i=this.map[t];this.map[t]=i?i+", "+e:e},d.prototype.delete=function(t){delete this.map[h(t)]},d.prototype.get=function(t){return t=h(t),this.has(t)?this.map[t]:null},d.prototype.has=function(t){return this.map.hasOwnProperty(h(t))},d.prototype.set=function(t,e){this.map[h(t)]=l(e)},d.prototype.forEach=function(t,e){for(var i in this.map)this.map.hasOwnProperty(i)&&t.call(e,this.map[i],i,this)},d.prototype.keys=function(){var t=[];return this.forEach(function(e,i){t.push(i)}),p(t)},d.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),p(t)},d.prototype.entries=function(){var t=[];return this.forEach(function(e,i){t.push([i,e])}),p(t)},s&&(d.prototype[Symbol.iterator]=d.prototype.entries);var I=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function E(t,e){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var i,n,s=(e=e||{}).body;if(t instanceof E){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new d(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,s||null==t._bodyInit||(s=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new d(e.headers)),this.method=(n=(i=e.method||this.method||"GET").toUpperCase(),I.indexOf(n)>-1?n:i),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal||function(){if("AbortController"in r)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&s)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(s),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==e.cache&&"no-cache"!==e.cache)){var a=/([?&])_=[^&]*/;a.test(this.url)?this.url=this.url.replace(a,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function _(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var i=t.split("="),r=i.shift().replace(/\+/g," "),n=i.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(n))}}),e}function A(t,e){if(!(this instanceof A))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===e.statusText?"":""+e.statusText,this.headers=new d(e.headers),this.url=e.url||"",this._initBody(t)}E.prototype.clone=function(){return new E(this,{body:this._bodyInit})},w.call(E.prototype),w.call(A.prototype),A.prototype.clone=function(){return new A(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},A.error=function(){var t=new A(null,{status:200,statusText:""});return t.ok=!1,t.status=0,t.type="error",t};var v=[301,302,303,307,308];A.redirect=function(t,e){if(-1===v.indexOf(e))throw new RangeError("Invalid status code");return new A(null,{status:e,headers:{location:t}})},e.DOMException=r.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var i=Error(t);this.stack=i.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function T(t,i){return new Promise(function(n,s){var o=new E(t,i);if(o.signal&&o.signal.aborted)return s(new e.DOMException("Aborted","AbortError"));var c=new XMLHttpRequest;function f(){c.abort()}if(c.onload=function(){var t,e,i={statusText:c.statusText,headers:(t=c.getAllResponseHeaders()||"",e=new d,t.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(t){return 0===t.indexOf("\n")?t.substr(1,t.length):t}).forEach(function(t){var i=t.split(":"),r=i.shift().trim();if(r){var n=i.join(":").trim();try{e.append(r,n)}catch(t){console.warn("Response "+t.message)}}}),e)};0===o.url.indexOf("file://")&&(c.status<200||c.status>599)?i.status=200:i.status=c.status,i.url="responseURL"in c?c.responseURL:i.headers.get("X-Request-URL");var r="response"in c?c.response:c.responseText;setTimeout(function(){n(new A(r,i))},0)},c.onerror=function(){setTimeout(function(){s(new TypeError("Network request failed"))},0)},c.ontimeout=function(){setTimeout(function(){s(new TypeError("Network request timed out"))},0)},c.onabort=function(){setTimeout(function(){s(new e.DOMException("Aborted","AbortError"))},0)},c.open(o.method,function(t){try{return""===t&&r.location.href?r.location.href:t}catch(e){return t}}(o.url),!0),"include"===o.credentials?c.withCredentials=!0:"omit"===o.credentials&&(c.withCredentials=!1),"responseType"in c&&(a?c.responseType="blob":u&&(c.responseType="arraybuffer")),i&&"object"==typeof i.headers&&!(i.headers instanceof d||r.Headers&&i.headers instanceof r.Headers)){var p=[];Object.getOwnPropertyNames(i.headers).forEach(function(t){p.push(h(t)),c.setRequestHeader(t,l(i.headers[t]))}),o.headers.forEach(function(t,e){-1===p.indexOf(e)&&c.setRequestHeader(e,t)})}else o.headers.forEach(function(t,e){c.setRequestHeader(e,t)});o.signal&&(o.signal.addEventListener("abort",f),c.onreadystatechange=function(){4===c.readyState&&o.signal.removeEventListener("abort",f)}),c.send(void 0===o._bodyInit?null:o._bodyInit)})}T.polyfill=!0,r.fetch||(r.fetch=T,r.Headers=d,r.Request=E,r.Response=A),e.Headers=d,e.Request=E,e.Response=A,e.fetch=T,Object.defineProperty(e,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var s=r.fetch?r:n;(e=s.fetch).default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e},6862:(t,e,i)=>{"use strict";i.d(e,{Ev:()=>r,JD:()=>n,Ks:()=>o,el:()=>s,pD:()=>a});const r=32;function n(t){if(65!==t.length||4!==t[0])throw new Error("Invalid uncompressed P-256 key");const e=t.slice(1,33),i=t.slice(33,65);if(32!==e.length||32!==i.length)throw new Error("Invalid x or y length");const r=1&i[31]?3:2,n=new Uint8Array(33);return n[0]=r,n.set(e,1),n}function s(t,e){const i=t.padStart(2*Math.ceil(t.length/2),"0");return function(t){const e=function(t){if(0===arguments.length)throw new TypeError("1 argument required, but only 0 present.");let e;for(t=`${t}`,e=0;e<t.length;e++)if(t.charCodeAt(e)>255)throw new Error(`InvalidCharacterError: found code point greater than 255:${t.charCodeAt(e)} at position ${e}`);let i="";for(e=0;e<t.length;e+=3){const r=[void 0,void 0,void 0,void 0];r[0]=t.charCodeAt(e)>>2,r[1]=(3&t.charCodeAt(e))<<4,t.length>e+1&&(r[1]|=t.charCodeAt(e+1)>>4,r[2]=(15&t.charCodeAt(e+1))<<2),t.length>e+2&&(r[2]|=t.charCodeAt(e+2)>>6,r[3]=63&t.charCodeAt(e+2));for(let t=0;t<r.length;t++)void 0===r[t]?i+="=":i+=u(r[t])}return i}(t);return function(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}(e)}(o(i,e).reduce((t,e)=>t+String.fromCharCode(e),""))}function a(t){return t.reduce((t,e)=>t+e.toString(16).padStart(2,"0"),"")}const o=(t,e)=>{if(!t||t.length%2!=0||!/^[0-9A-Fa-f]+$/.test(t))throw new Error(`cannot create uint8array from invalid hex string: "${t}"`);const i=new Uint8Array(t.match(/../g).map(t=>parseInt(t,16)));if(!e)return i;if(t.length/2>e)throw new Error("hex value cannot fit in a buffer of "+e+" byte(s)");let r=new Uint8Array(e);return r.set(i,e-i.length),r};function u(t){if(t>=0&&t<64)return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[t]}},7238:(t,e,i)=>{"use strict";i.d(e,{lY:()=>I,mh:()=>E});var r=i(9271),n=i(2531);const s=BigInt(0),a=BigInt(1),o=BigInt(2),u=BigInt(7),c=BigInt(256),f=BigInt(113),h=[],l=[],p=[];for(let t=0,e=a,i=1,r=0;t<24;t++){[i,r]=[r,(2*i+3*r)%5],h.push(2*(5*r+i)),l.push((t+1)*(t+2)/2%64);let n=s;for(let t=0;t<7;t++)e=(e<<a^(e>>u)*f)%c,e&o&&(n^=a<<(a<<BigInt(t))-a);p.push(n)}const d=(0,r.lD)(p,!0),y=d[0],g=d[1],m=(t,e,i)=>i>32?(0,r.WM)(t,e,i):(0,r.P5)(t,e,i),b=(t,e,i)=>i>32?(0,r.im)(t,e,i):(0,r.B4)(t,e,i);class w extends n.Vw{constructor(t,e,i,r=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=e,this.outputLen=i,this.enableXOF=r,this.rounds=s,(0,n.Fe)(i),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=(0,n.DH)(this.state)}clone(){return this._cloneInto()}keccak(){(0,n.fd)(this.state32),function(t,e=24){const i=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let e=0;e<10;e++)i[e]=t[e]^t[e+10]^t[e+20]^t[e+30]^t[e+40];for(let e=0;e<10;e+=2){const r=(e+8)%10,n=(e+2)%10,s=i[n],a=i[n+1],o=m(s,a,1)^i[r],u=b(s,a,1)^i[r+1];for(let i=0;i<50;i+=10)t[e+i]^=o,t[e+i+1]^=u}let e=t[2],n=t[3];for(let i=0;i<24;i++){const r=l[i],s=m(e,n,r),a=b(e,n,r),o=h[i];e=t[o],n=t[o+1],t[o]=s,t[o+1]=a}for(let e=0;e<50;e+=10){for(let r=0;r<10;r++)i[r]=t[e+r];for(let r=0;r<10;r++)t[e+r]^=~i[(r+2)%10]&i[(r+4)%10]}t[0]^=y[r],t[1]^=g[r]}(0,n.uH)(i)}(this.state32,this.rounds),(0,n.fd)(this.state32),this.posOut=0,this.pos=0}update(t){(0,n.CC)(this),t=(0,n.ZJ)(t),(0,n.DO)(t);const{blockLen:e,state:i}=this,r=t.length;for(let n=0;n<r;){const s=Math.min(e-this.pos,r-n);for(let e=0;e<s;e++)i[this.pos++]^=t[n++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:i,blockLen:r}=this;t[i]^=e,128&e&&i===r-1&&this.keccak(),t[r-1]^=128,this.keccak()}writeInto(t){(0,n.CC)(this,!1),(0,n.DO)(t),this.finish();const e=this.state,{blockLen:i}=this;for(let r=0,n=t.length;r<n;){this.posOut>=i&&this.keccak();const s=Math.min(i-this.posOut,n-r);t.set(e.subarray(this.posOut,this.posOut+s),r),this.posOut+=s,r+=s}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return(0,n.Fe)(t),this.xofInto(new Uint8Array(t))}digestInto(t){if((0,n.Ht)(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,(0,n.uH)(this.state)}_cloneInto(t){const{blockLen:e,suffix:i,outputLen:r,rounds:n,enableXOF:s}=this;return t||(t=new w(e,i,r,s,n)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=n,t.suffix=i,t.outputLen=r,t.enableXOF=s,t.destroyed=this.destroyed,t}}const I=(()=>{return t=1,e=136,i=32,(0,n.qj)(()=>new w(e,t,i));var t,e,i})(),E=(()=>{return t=31,e=136,i=32,(0,n.xS)((r={})=>new w(e,t,void 0===r.dkLen?i:r.dkLen,!0));var t,e,i})()},7526:(t,e)=>{"use strict";e.byteLength=function(t){var e=o(t),i=e[0],r=e[1];return 3*(i+r)/4-r},e.toByteArray=function(t){var e,i,s=o(t),a=s[0],u=s[1],c=new n(function(t,e,i){return 3*(e+i)/4-i}(0,a,u)),f=0,h=u>0?a-4:a;for(i=0;i<h;i+=4)e=r[t.charCodeAt(i)]<<18|r[t.charCodeAt(i+1)]<<12|r[t.charCodeAt(i+2)]<<6|r[t.charCodeAt(i+3)],c[f++]=e>>16&255,c[f++]=e>>8&255,c[f++]=255&e;return 2===u&&(e=r[t.charCodeAt(i)]<<2|r[t.charCodeAt(i+1)]>>4,c[f++]=255&e),1===u&&(e=r[t.charCodeAt(i)]<<10|r[t.charCodeAt(i+1)]<<4|r[t.charCodeAt(i+2)]>>2,c[f++]=e>>8&255,c[f++]=255&e),c},e.fromByteArray=function(t){for(var e,r=t.length,n=r%3,s=[],a=16383,o=0,u=r-n;o<u;o+=a)s.push(c(t,o,o+a>u?u:o+a));return 1===n?(e=t[r-1],s.push(i[e>>2]+i[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],s.push(i[e>>10]+i[e>>4&63]+i[e<<2&63]+"=")),s.join("")};for(var i=[],r=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)i[a]=s[a],r[s.charCodeAt(a)]=a;function o(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function u(t){return i[t>>18&63]+i[t>>12&63]+i[t>>6&63]+i[63&t]}function c(t,e,i){for(var r,n=[],s=e;s<i;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),n.push(u(r));return n.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},8030:(t,e,i)=>{"use strict";i.d(e,{D0:()=>B,Tp:()=>U,dQ:()=>_,jr:()=>v,pS:()=>T,qy:()=>z,zH:()=>g,zi:()=>y});var r=i(1848),n=i(2531);const s=BigInt(0),a=BigInt(1),o=BigInt(2),u=BigInt(3),c=BigInt(4),f=BigInt(5),h=BigInt(7),l=BigInt(8),p=BigInt(9),d=BigInt(16);function y(t,e){const i=t%e;return i>=s?i:e+i}function g(t,e,i){let r=t;for(;e-- >s;)r*=r,r%=i;return r}function m(t,e){if(t===s)throw new Error("invert: expected non-zero number");if(e<=s)throw new Error("invert: expected positive modulus, got "+e);let i=y(t,e),r=e,n=s,o=a,u=a,c=s;for(;i!==s;){const t=r/i,e=r%i,s=n-u*t,a=o-c*t;r=i,i=e,n=u,o=c,u=s,c=a}if(r!==a)throw new Error("invert: does not exist");return y(n,e)}function b(t,e,i){if(!t.eql(t.sqr(e),i))throw new Error("Cannot find square root")}function w(t,e){const i=(t.ORDER+a)/c,r=t.pow(e,i);return b(t,r,e),r}function I(t,e){const i=(t.ORDER-f)/l,r=t.mul(e,o),n=t.pow(r,i),s=t.mul(e,n),a=t.mul(t.mul(s,o),n),u=t.mul(s,t.sub(a,t.ONE));return b(t,u,e),u}function E(t){if(t<u)throw new Error("sqrt is not defined for small field");let e=t-a,i=0;for(;e%o===s;)e/=o,i++;let r=o;const n=B(t);for(;1===S(n,r);)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(1===i)return w;let c=n.pow(r,e);const f=(e+a)/o;return function(t,r){if(t.is0(r))return r;if(1!==S(t,r))throw new Error("Cannot find square root");let n=i,s=t.mul(t.ONE,c),o=t.pow(r,e),u=t.pow(r,f);for(;!t.eql(o,t.ONE);){if(t.is0(o))return t.ZERO;let e=1,i=t.sqr(o);for(;!t.eql(i,t.ONE);)if(e++,i=t.sqr(i),e===n)throw new Error("Cannot find square root");const r=a<<BigInt(n-e-1),c=t.pow(s,r);n=e,s=t.sqr(c),o=t.mul(o,s),u=t.mul(u,c)}return u}}const _=(t,e)=>(y(t,e)&a)===a,A=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function v(t){const e=A.reduce((t,e)=>(t[e]="function",t),{ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"});return(0,r.DS)(t,e),t}function T(t,e,i=!1){const r=new Array(e.length).fill(i?t.ZERO:void 0),n=e.reduce((e,i,n)=>t.is0(i)?e:(r[n]=e,t.mul(e,i)),t.ONE),s=t.inv(n);return e.reduceRight((e,i,n)=>t.is0(i)?e:(r[n]=t.mul(e,r[n]),t.mul(e,i)),s),r}function S(t,e){const i=(t.ORDER-a)/o,r=t.pow(e,i),n=t.eql(r,t.ONE),s=t.eql(r,t.ZERO),u=t.eql(r,t.neg(t.ONE));if(!n&&!s&&!u)throw new Error("invalid Legendre symbol result");return n?1:s?0:-1}function B(t,e,i=!1,o={}){if(t<=s)throw new Error("invalid field: expected ORDER > 0, got "+t);let g,_,A,v=!1;if("object"==typeof e&&null!=e){if(o.sqrt||i)throw new Error("cannot specify opts in two arguments");const t=e;t.BITS&&(g=t.BITS),t.sqrt&&(_=t.sqrt),"boolean"==typeof t.isLE&&(i=t.isLE),"boolean"==typeof t.modOnDecode&&(v=t.modOnDecode),A=t.allowedLengths}else"number"==typeof e&&(g=e),o.sqrt&&(_=o.sqrt);const{nBitLength:S,nByteLength:O}=function(t,e){void 0!==e&&(0,n.Fe)(e);const i=void 0!==e?e:t.toString(2).length;return{nBitLength:i,nByteLength:Math.ceil(i/8)}}(t,g);if(O>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let U;const z=Object.freeze({ORDER:t,isLE:i,BITS:S,BYTES:O,MASK:(0,r.OG)(S),ZERO:s,ONE:a,allowedLengths:A,create:e=>y(e,t),isValid:e=>{if("bigint"!=typeof e)throw new Error("invalid field element: expected bigint, got "+typeof e);return s<=e&&e<t},is0:t=>t===s,isValidNot0:t=>!z.is0(t)&&z.isValid(t),isOdd:t=>(t&a)===a,neg:e=>y(-e,t),eql:(t,e)=>t===e,sqr:e=>y(e*e,t),add:(e,i)=>y(e+i,t),sub:(e,i)=>y(e-i,t),mul:(e,i)=>y(e*i,t),pow:(t,e)=>function(t,e,i){if(i<s)throw new Error("invalid exponent, negatives unsupported");if(i===s)return t.ONE;if(i===a)return e;let r=t.ONE,n=e;for(;i>s;)i&a&&(r=t.mul(r,n)),n=t.sqr(n),i>>=a;return r}(z,t,e),div:(e,i)=>y(e*m(i,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>m(e,t),sqrt:_||(e=>{return U||(U=(i=t)%c===u?w:i%l===f?I:i%d===p?function(t){const e=B(t),i=E(t),r=i(e,e.neg(e.ONE)),n=i(e,r),s=i(e,e.neg(r)),a=(t+h)/d;return(t,e)=>{let i=t.pow(e,a),o=t.mul(i,r);const u=t.mul(i,n),c=t.mul(i,s),f=t.eql(t.sqr(o),e),h=t.eql(t.sqr(u),e);i=t.cmov(i,o,f),o=t.cmov(c,u,h);const l=t.eql(t.sqr(o),e),p=t.cmov(i,o,l);return b(t,p,e),p}}(i):E(i)),U(z,e);var i}),toBytes:t=>i?(0,r.z)(t,O):(0,r.lq)(t,O),fromBytes:(e,n=!0)=>{if(A){if(!A.includes(e.length)||e.length>O)throw new Error("Field.fromBytes: expected "+A+" bytes, got "+e.length);const t=new Uint8Array(O);t.set(e,i?0:t.length-e.length),e=t}if(e.length!==O)throw new Error("Field.fromBytes: expected "+O+" bytes, got "+e.length);let s=i?(0,r.lX)(e):(0,r.Ph)(e);if(v&&(s=y(s,t)),!n&&!z.isValid(s))throw new Error("invalid field element: outside of range 0..ORDER");return s},invertBatch:t=>T(z,t),cmov:(t,e,i)=>i?e:t});return Object.freeze(z)}function O(t){if("bigint"!=typeof t)throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function U(t){const e=O(t);return e+Math.ceil(e/2)}function z(t,e,i=!1){const n=t.length,s=O(e),o=U(e);if(n<16||n<o||n>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+n);const u=y(i?(0,r.lX)(t):(0,r.Ph)(t),e-a)+a;return i?(0,r.z)(u,s):(0,r.lq)(u,s)}},8226:(t,e,i)=>{"use strict";i.d(e,{sc:()=>r});const r=i(8442).sc},8287:(t,e,i)=>{"use strict";const r=i(7526),n=i(251),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=function(t){return+t!=t&&(t=0),u.alloc(+t)},e.INSPECT_MAX_BYTES=50;const a=2147483647;function o(t){if(t>a)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,u.prototype),e}function u(t,e,i){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return h(t)}return c(t,e,i)}function c(t,e,i){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!u.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const i=0|y(t,e);let r=o(i);const n=r.write(t,e);return n!==i&&(r=r.slice(0,n)),r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(G(t,Uint8Array)){const e=new Uint8Array(t);return p(e.buffer,e.byteOffset,e.byteLength)}return l(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(G(t,ArrayBuffer)||t&&G(t.buffer,ArrayBuffer))return p(t,e,i);if("undefined"!=typeof SharedArrayBuffer&&(G(t,SharedArrayBuffer)||t&&G(t.buffer,SharedArrayBuffer)))return p(t,e,i);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return u.from(r,e,i);const n=function(t){if(u.isBuffer(t)){const e=0|d(t.length),i=o(e);return 0===i.length||t.copy(i,0,0,e),i}return void 0!==t.length?"number"!=typeof t.length||$(t.length)?o(0):l(t):"Buffer"===t.type&&Array.isArray(t.data)?l(t.data):void 0}(t);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return u.from(t[Symbol.toPrimitive]("string"),e,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function f(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function h(t){return f(t),o(t<0?0:0|d(t))}function l(t){const e=t.length<0?0:0|d(t.length),i=o(e);for(let r=0;r<e;r+=1)i[r]=255&t[r];return i}function p(t,e,i){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(i||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,e):new Uint8Array(t,e,i),Object.setPrototypeOf(r,u.prototype),r}function d(t){if(t>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function y(t,e){if(u.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||G(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const i=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===i)return 0;let n=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return j(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return J(t).length;default:if(n)return r?-1:j(t).length;e=(""+e).toLowerCase(),n=!0}}function g(t,e,i){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return z(this,e,i);case"utf8":case"utf-8":return S(this,e,i);case"ascii":return O(this,e,i);case"latin1":case"binary":return U(this,e,i);case"base64":return T(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,i);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,i){const r=t[e];t[e]=t[i],t[i]=r}function b(t,e,i,r,n){if(0===t.length)return-1;if("string"==typeof i?(r=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),$(i=+i)&&(i=n?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(n)return-1;i=t.length-1}else if(i<0){if(!n)return-1;i=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:w(t,e,i,r,n);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):w(t,[e],i,r,n);throw new TypeError("val must be string, number or Buffer")}function w(t,e,i,r,n){let s,a=1,o=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,o/=2,u/=2,i/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(n){let r=-1;for(s=i;s<o;s++)if(c(t,s)===c(e,-1===r?0:s-r)){if(-1===r&&(r=s),s-r+1===u)return r*a}else-1!==r&&(s-=s-r),r=-1}else for(i+u>o&&(i=o-u),s=i;s>=0;s--){let i=!0;for(let r=0;r<u;r++)if(c(t,s+r)!==c(e,r)){i=!1;break}if(i)return s}return-1}function I(t,e,i,r){i=Number(i)||0;const n=t.length-i;r?(r=Number(r))>n&&(r=n):r=n;const s=e.length;let a;for(r>s/2&&(r=s/2),a=0;a<r;++a){const r=parseInt(e.substr(2*a,2),16);if($(r))return a;t[i+a]=r}return a}function E(t,e,i,r){return W(j(e,t.length-i),t,i,r)}function _(t,e,i,r){return W(function(t){const e=[];for(let i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,r)}function A(t,e,i,r){return W(J(e),t,i,r)}function v(t,e,i,r){return W(function(t,e){let i,r,n;const s=[];for(let a=0;a<t.length&&!((e-=2)<0);++a)i=t.charCodeAt(a),r=i>>8,n=i%256,s.push(n),s.push(r);return s}(e,t.length-i),t,i,r)}function T(t,e,i){return 0===e&&i===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,i))}function S(t,e,i){i=Math.min(t.length,i);const r=[];let n=e;for(;n<i;){const e=t[n];let s=null,a=e>239?4:e>223?3:e>191?2:1;if(n+a<=i){let i,r,o,u;switch(a){case 1:e<128&&(s=e);break;case 2:i=t[n+1],128==(192&i)&&(u=(31&e)<<6|63&i,u>127&&(s=u));break;case 3:i=t[n+1],r=t[n+2],128==(192&i)&&128==(192&r)&&(u=(15&e)<<12|(63&i)<<6|63&r,u>2047&&(u<55296||u>57343)&&(s=u));break;case 4:i=t[n+1],r=t[n+2],o=t[n+3],128==(192&i)&&128==(192&r)&&128==(192&o)&&(u=(15&e)<<18|(63&i)<<12|(63&r)<<6|63&o,u>65535&&u<1114112&&(s=u))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),n+=a}return function(t){const e=t.length;if(e<=B)return String.fromCharCode.apply(String,t);let i="",r=0;for(;r<e;)i+=String.fromCharCode.apply(String,t.slice(r,r+=B));return i}(r)}e.kMaxLength=a,u.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(t,e,i){return c(t,e,i)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(t,e,i){return function(t,e,i){return f(t),t<=0?o(t):void 0!==e?"string"==typeof i?o(t).fill(e,i):o(t).fill(e):o(t)}(t,e,i)},u.allocUnsafe=function(t){return h(t)},u.allocUnsafeSlow=function(t){return h(t)},u.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==u.prototype},u.compare=function(t,e){if(G(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),G(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let i=t.length,r=e.length;for(let n=0,s=Math.min(i,r);n<s;++n)if(t[n]!==e[n]){i=t[n],r=e[n];break}return i<r?-1:r<i?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);let i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;const r=u.allocUnsafe(e);let n=0;for(i=0;i<t.length;++i){let e=t[i];if(G(e,Uint8Array))n+e.length>r.length?(u.isBuffer(e)||(e=u.from(e)),e.copy(r,n)):Uint8Array.prototype.set.call(r,e,n);else{if(!u.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,n)}n+=e.length}return r},u.byteLength=y,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)m(this,e,e+1);return this},u.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},u.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},u.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?S(this,0,t):g.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){let t="";const i=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(t+=" ... "),"<Buffer "+t+">"},s&&(u.prototype[s]=u.prototype.inspect),u.prototype.compare=function(t,e,i,r,n){if(G(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===r&&(r=0),void 0===n&&(n=this.length),e<0||i>t.length||r<0||n>this.length)throw new RangeError("out of range index");if(r>=n&&e>=i)return 0;if(r>=n)return-1;if(e>=i)return 1;if(this===t)return 0;let s=(n>>>=0)-(r>>>=0),a=(i>>>=0)-(e>>>=0);const o=Math.min(s,a),c=this.slice(r,n),f=t.slice(e,i);for(let t=0;t<o;++t)if(c[t]!==f[t]){s=c[t],a=f[t];break}return s<a?-1:a<s?1:0},u.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},u.prototype.indexOf=function(t,e,i){return b(this,t,e,i,!0)},u.prototype.lastIndexOf=function(t,e,i){return b(this,t,e,i,!1)},u.prototype.write=function(t,e,i,r){if(void 0===e)r="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)r=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(i)?(i>>>=0,void 0===r&&(r="utf8")):(r=i,i=void 0)}const n=this.length-e;if((void 0===i||i>n)&&(i=n),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let s=!1;for(;;)switch(r){case"hex":return I(this,t,e,i);case"utf8":case"utf-8":return E(this,t,e,i);case"ascii":case"latin1":case"binary":return _(this,t,e,i);case"base64":return A(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,t,e,i);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const B=4096;function O(t,e,i){let r="";i=Math.min(t.length,i);for(let n=e;n<i;++n)r+=String.fromCharCode(127&t[n]);return r}function U(t,e,i){let r="";i=Math.min(t.length,i);for(let n=e;n<i;++n)r+=String.fromCharCode(t[n]);return r}function z(t,e,i){const r=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>r)&&(i=r);let n="";for(let r=e;r<i;++r)n+=Z[t[r]];return n}function R(t,e,i){const r=t.slice(e,i);let n="";for(let t=0;t<r.length-1;t+=2)n+=String.fromCharCode(r[t]+256*r[t+1]);return n}function x(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function P(t,e,i,r,n,s){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<s)throw new RangeError('"value" argument is out of bounds');if(i+r>t.length)throw new RangeError("Index out of range")}function C(t,e,i,r,n){V(e,r,n,t,i,7);let s=Number(e&BigInt(4294967295));t[i++]=s,s>>=8,t[i++]=s,s>>=8,t[i++]=s,s>>=8,t[i++]=s;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[i++]=a,a>>=8,t[i++]=a,a>>=8,t[i++]=a,a>>=8,t[i++]=a,i}function N(t,e,i,r,n){V(e,r,n,t,i,7);let s=Number(e&BigInt(4294967295));t[i+7]=s,s>>=8,t[i+6]=s,s>>=8,t[i+5]=s,s>>=8,t[i+4]=s;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[i+3]=a,a>>=8,t[i+2]=a,a>>=8,t[i+1]=a,a>>=8,t[i]=a,i+8}function D(t,e,i,r,n,s){if(i+r>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function M(t,e,i,r,s){return e=+e,i>>>=0,s||D(t,0,i,4),n.write(t,e,i,r,23,4),i+4}function L(t,e,i,r,s){return e=+e,i>>>=0,s||D(t,0,i,8),n.write(t,e,i,r,52,8),i+8}u.prototype.slice=function(t,e){const i=this.length;(t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t);const r=this.subarray(t,e);return Object.setPrototypeOf(r,u.prototype),r},u.prototype.readUintLE=u.prototype.readUIntLE=function(t,e,i){t>>>=0,e>>>=0,i||x(t,e,this.length);let r=this[t],n=1,s=0;for(;++s<e&&(n*=256);)r+=this[t+s]*n;return r},u.prototype.readUintBE=u.prototype.readUIntBE=function(t,e,i){t>>>=0,e>>>=0,i||x(t,e,this.length);let r=this[t+--e],n=1;for(;e>0&&(n*=256);)r+=this[t+--e]*n;return r},u.prototype.readUint8=u.prototype.readUInt8=function(t,e){return t>>>=0,e||x(t,1,this.length),this[t]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(t,e){return t>>>=0,e||x(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(t,e){return t>>>=0,e||x(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(t,e){return t>>>=0,e||x(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(t,e){return t>>>=0,e||x(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readBigUInt64LE=X(function(t){k(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||H(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,n=this[++t]+256*this[++t]+65536*this[++t]+i*2**24;return BigInt(r)+(BigInt(n)<<BigInt(32))}),u.prototype.readBigUInt64BE=X(function(t){k(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||H(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],n=this[++t]*2**24+65536*this[++t]+256*this[++t]+i;return(BigInt(r)<<BigInt(32))+BigInt(n)}),u.prototype.readIntLE=function(t,e,i){t>>>=0,e>>>=0,i||x(t,e,this.length);let r=this[t],n=1,s=0;for(;++s<e&&(n*=256);)r+=this[t+s]*n;return n*=128,r>=n&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,i){t>>>=0,e>>>=0,i||x(t,e,this.length);let r=e,n=1,s=this[t+--r];for(;r>0&&(n*=256);)s+=this[t+--r]*n;return n*=128,s>=n&&(s-=Math.pow(2,8*e)),s},u.prototype.readInt8=function(t,e){return t>>>=0,e||x(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){t>>>=0,e||x(t,2,this.length);const i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},u.prototype.readInt16BE=function(t,e){t>>>=0,e||x(t,2,this.length);const i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},u.prototype.readInt32LE=function(t,e){return t>>>=0,e||x(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return t>>>=0,e||x(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readBigInt64LE=X(function(t){k(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||H(t,this.length-8);const r=this[t+4]+256*this[t+5]+65536*this[t+6]+(i<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)}),u.prototype.readBigInt64BE=X(function(t){k(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||H(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+i)}),u.prototype.readFloatLE=function(t,e){return t>>>=0,e||x(t,4,this.length),n.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return t>>>=0,e||x(t,4,this.length),n.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return t>>>=0,e||x(t,8,this.length),n.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return t>>>=0,e||x(t,8,this.length),n.read(this,t,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(t,e,i,r){t=+t,e>>>=0,i>>>=0,r||P(this,t,e,i,Math.pow(2,8*i)-1,0);let n=1,s=0;for(this[e]=255&t;++s<i&&(n*=256);)this[e+s]=t/n&255;return e+i},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(t,e,i,r){t=+t,e>>>=0,i>>>=0,r||P(this,t,e,i,Math.pow(2,8*i)-1,0);let n=i-1,s=1;for(this[e+n]=255&t;--n>=0&&(s*=256);)this[e+n]=t/s&255;return e+i},u.prototype.writeUint8=u.prototype.writeUInt8=function(t,e,i){return t=+t,e>>>=0,i||P(this,t,e,1,255,0),this[e]=255&t,e+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(t,e,i){return t=+t,e>>>=0,i||P(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(t,e,i){return t=+t,e>>>=0,i||P(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(t,e,i){return t=+t,e>>>=0,i||P(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(t,e,i){return t=+t,e>>>=0,i||P(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeBigUInt64LE=X(function(t,e=0){return C(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=X(function(t,e=0){return N(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(t,e,i,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*i-1);P(this,t,e,i,r-1,-r)}let n=0,s=1,a=0;for(this[e]=255&t;++n<i&&(s*=256);)t<0&&0===a&&0!==this[e+n-1]&&(a=1),this[e+n]=(t/s|0)-a&255;return e+i},u.prototype.writeIntBE=function(t,e,i,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*i-1);P(this,t,e,i,r-1,-r)}let n=i-1,s=1,a=0;for(this[e+n]=255&t;--n>=0&&(s*=256);)t<0&&0===a&&0!==this[e+n+1]&&(a=1),this[e+n]=(t/s|0)-a&255;return e+i},u.prototype.writeInt8=function(t,e,i){return t=+t,e>>>=0,i||P(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,i){return t=+t,e>>>=0,i||P(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeInt16BE=function(t,e,i){return t=+t,e>>>=0,i||P(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeInt32LE=function(t,e,i){return t=+t,e>>>=0,i||P(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},u.prototype.writeInt32BE=function(t,e,i){return t=+t,e>>>=0,i||P(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeBigInt64LE=X(function(t,e=0){return C(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=X(function(t,e=0){return N(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeFloatLE=function(t,e,i){return M(this,t,e,!0,i)},u.prototype.writeFloatBE=function(t,e,i){return M(this,t,e,!1,i)},u.prototype.writeDoubleLE=function(t,e,i){return L(this,t,e,!0,i)},u.prototype.writeDoubleBE=function(t,e,i){return L(this,t,e,!1,i)},u.prototype.copy=function(t,e,i,r){if(!u.isBuffer(t))throw new TypeError("argument should be a Buffer");if(i||(i=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<i&&(r=i),r===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-i&&(r=t.length-e+i);const n=r-i;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,i,r):Uint8Array.prototype.set.call(t,this.subarray(i,r),e),n},u.prototype.fill=function(t,e,i,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){const e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;let n;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(n=e;n<i;++n)this[n]=t;else{const s=u.isBuffer(t)?t:u.from(t,r),a=s.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(n=0;n<i-e;++n)this[n+e]=s[n%a]}return this};const Y={};function q(t,e,i){Y[t]=class extends i{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function K(t){let e="",i=t.length;const r="-"===t[0]?1:0;for(;i>=r+4;i-=3)e=`_${t.slice(i-3,i)}${e}`;return`${t.slice(0,i)}${e}`}function V(t,e,i,r,n,s){if(t>i||t<e){const r="bigint"==typeof e?"n":"";let n;throw n=s>3?0===e||e===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(s+1)}${r}`:`>= -(2${r} ** ${8*(s+1)-1}${r}) and < 2 ** ${8*(s+1)-1}${r}`:`>= ${e}${r} and <= ${i}${r}`,new Y.ERR_OUT_OF_RANGE("value",n,t)}!function(t,e,i){k(e,"offset"),void 0!==t[e]&&void 0!==t[e+i]||H(e,t.length-(i+1))}(r,n,s)}function k(t,e){if("number"!=typeof t)throw new Y.ERR_INVALID_ARG_TYPE(e,"number",t)}function H(t,e,i){if(Math.floor(t)!==t)throw k(t,i),new Y.ERR_OUT_OF_RANGE(i||"offset","an integer",t);if(e<0)throw new Y.ERR_BUFFER_OUT_OF_BOUNDS;throw new Y.ERR_OUT_OF_RANGE(i||"offset",`>= ${i?1:0} and <= ${e}`,t)}q("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),q("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError),q("ERR_OUT_OF_RANGE",function(t,e,i){let r=`The value of "${t}" is out of range.`,n=i;return Number.isInteger(i)&&Math.abs(i)>2**32?n=K(String(i)):"bigint"==typeof i&&(n=String(i),(i>BigInt(2)**BigInt(32)||i<-(BigInt(2)**BigInt(32)))&&(n=K(n)),n+="n"),r+=` It must be ${e}. Received ${n}`,r},RangeError);const F=/[^+/0-9A-Za-z-_]/g;function j(t,e){let i;e=e||1/0;const r=t.length;let n=null;const s=[];for(let a=0;a<r;++a){if(i=t.charCodeAt(a),i>55295&&i<57344){if(!n){if(i>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&s.push(239,191,189);continue}n=i;continue}if(i<56320){(e-=3)>-1&&s.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&(e-=3)>-1&&s.push(239,191,189);if(n=null,i<128){if((e-=1)<0)break;s.push(i)}else if(i<2048){if((e-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return s}function J(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(F,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function W(t,e,i,r){let n;for(n=0;n<r&&!(n+i>=e.length||n>=t.length);++n)e[n+i]=t[n];return n}function G(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function $(t){return t!=t}const Z=function(){const t="0123456789abcdef",e=new Array(256);for(let i=0;i<16;++i){const r=16*i;for(let n=0;n<16;++n)e[r+n]=t[i]+t[n]}return e}();function X(t){return"undefined"==typeof BigInt?Q:t}function Q(){throw new Error("BigInt not supported")}},8442:(t,e,i)=>{"use strict";i.d(e,{sc:()=>E,qt:()=>A,Zf:()=>_});var r=i(2531);function n(t,e,i){return t&e^~t&i}function s(t,e,i){return t&e^t&i^e&i}class a extends r.Vw{constructor(t,e,i,n){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=i,this.isLE=n,this.buffer=new Uint8Array(t),this.view=(0,r.O8)(this.buffer)}update(t){(0,r.CC)(this),t=(0,r.ZJ)(t),(0,r.DO)(t);const{view:e,buffer:i,blockLen:n}=this,s=t.length;for(let a=0;a<s;){const o=Math.min(n-this.pos,s-a);if(o===n){const e=(0,r.O8)(t);for(;n<=s-a;a+=n)this.process(e,a);continue}i.set(t.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===n&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,r.CC)(this),(0,r.Ht)(t,this),this.finished=!0;const{buffer:e,view:i,blockLen:n,isLE:s}=this;let{pos:a}=this;e[a++]=128,(0,r.uH)(this.buffer.subarray(a)),this.padOffset>n-a&&(this.process(i,0),a=0);for(let t=a;t<n;t++)e[t]=0;!function(t,e,i,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,i,r);const n=BigInt(32),s=BigInt(4294967295),a=Number(i>>n&s),o=Number(i&s),u=r?4:0,c=r?0:4;t.setUint32(e+u,a,r),t.setUint32(e+c,o,r)}(i,n-8,BigInt(8*this.length),s),this.process(i,0);const o=(0,r.O8)(t),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=u/4,f=this.get();if(c>f.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<c;t++)o.setUint32(4*t,f[t],s)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const i=t.slice(0,e);return this.destroy(),i}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:i,length:r,finished:n,destroyed:s,pos:a}=this;return t.destroyed=s,t.finished=n,t.length=r,t.pos=a,r%e&&t.buffer.set(i),t}clone(){return this._cloneInto()}}const o=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),u=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),c=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]);var f=i(9271);const h=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),l=new Uint32Array(64);class p extends a{constructor(t=32){super(64,t,8,!1),this.A=0|o[0],this.B=0|o[1],this.C=0|o[2],this.D=0|o[3],this.E=0|o[4],this.F=0|o[5],this.G=0|o[6],this.H=0|o[7]}get(){const{A:t,B:e,C:i,D:r,E:n,F:s,G:a,H:o}=this;return[t,e,i,r,n,s,a,o]}set(t,e,i,r,n,s,a,o){this.A=0|t,this.B=0|e,this.C=0|i,this.D=0|r,this.E=0|n,this.F=0|s,this.G=0|a,this.H=0|o}process(t,e){for(let i=0;i<16;i++,e+=4)l[i]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=l[t-15],i=l[t-2],n=(0,r.Ow)(e,7)^(0,r.Ow)(e,18)^e>>>3,s=(0,r.Ow)(i,17)^(0,r.Ow)(i,19)^i>>>10;l[t]=s+l[t-7]+n+l[t-16]|0}let{A:i,B:a,C:o,D:u,E:c,F:f,G:p,H:d}=this;for(let t=0;t<64;t++){const e=d+((0,r.Ow)(c,6)^(0,r.Ow)(c,11)^(0,r.Ow)(c,25))+n(c,f,p)+h[t]+l[t]|0,y=((0,r.Ow)(i,2)^(0,r.Ow)(i,13)^(0,r.Ow)(i,22))+s(i,a,o)|0;d=p,p=f,f=c,c=u+e|0,u=o,o=a,a=i,i=e+y|0}i=i+this.A|0,a=a+this.B|0,o=o+this.C|0,u=u+this.D|0,c=c+this.E|0,f=f+this.F|0,p=p+this.G|0,d=d+this.H|0,this.set(i,a,o,u,c,f,p,d)}roundClean(){(0,r.uH)(l)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,r.uH)(this.buffer)}}const d=(()=>f.lD(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))))(),y=(()=>d[0])(),g=(()=>d[1])(),m=new Uint32Array(80),b=new Uint32Array(80);class w extends a{constructor(t=64){super(128,t,16,!1),this.Ah=0|c[0],this.Al=0|c[1],this.Bh=0|c[2],this.Bl=0|c[3],this.Ch=0|c[4],this.Cl=0|c[5],this.Dh=0|c[6],this.Dl=0|c[7],this.Eh=0|c[8],this.El=0|c[9],this.Fh=0|c[10],this.Fl=0|c[11],this.Gh=0|c[12],this.Gl=0|c[13],this.Hh=0|c[14],this.Hl=0|c[15]}get(){const{Ah:t,Al:e,Bh:i,Bl:r,Ch:n,Cl:s,Dh:a,Dl:o,Eh:u,El:c,Fh:f,Fl:h,Gh:l,Gl:p,Hh:d,Hl:y}=this;return[t,e,i,r,n,s,a,o,u,c,f,h,l,p,d,y]}set(t,e,i,r,n,s,a,o,u,c,f,h,l,p,d,y){this.Ah=0|t,this.Al=0|e,this.Bh=0|i,this.Bl=0|r,this.Ch=0|n,this.Cl=0|s,this.Dh=0|a,this.Dl=0|o,this.Eh=0|u,this.El=0|c,this.Fh=0|f,this.Fl=0|h,this.Gh=0|l,this.Gl=0|p,this.Hh=0|d,this.Hl=0|y}process(t,e){for(let i=0;i<16;i++,e+=4)m[i]=t.getUint32(e),b[i]=t.getUint32(e+=4);for(let t=16;t<80;t++){const e=0|m[t-15],i=0|b[t-15],r=f.rE(e,i,1)^f.rE(e,i,8)^f.xn(e,i,7),n=f.ry(e,i,1)^f.ry(e,i,8)^f.jm(e,i,7),s=0|m[t-2],a=0|b[t-2],o=f.rE(s,a,19)^f.qh(s,a,61)^f.xn(s,a,6),u=f.ry(s,a,19)^f.Ei(s,a,61)^f.jm(s,a,6),c=f.CW(n,u,b[t-7],b[t-16]),h=f.CQ(c,r,o,m[t-7],m[t-16]);m[t]=0|h,b[t]=0|c}let{Ah:i,Al:r,Bh:n,Bl:s,Ch:a,Cl:o,Dh:u,Dl:c,Eh:h,El:l,Fh:p,Fl:d,Gh:w,Gl:I,Hh:E,Hl:_}=this;for(let t=0;t<80;t++){const e=f.rE(h,l,14)^f.rE(h,l,18)^f.qh(h,l,41),A=f.ry(h,l,14)^f.ry(h,l,18)^f.Ei(h,l,41),v=h&p^~h&w,T=l&d^~l&I,S=f.F8(_,A,T,g[t],b[t]),B=f.TH(S,E,e,v,y[t],m[t]),O=0|S,U=f.rE(i,r,28)^f.qh(i,r,34)^f.qh(i,r,39),z=f.ry(i,r,28)^f.Ei(i,r,34)^f.Ei(i,r,39),R=i&n^i&a^n&a,x=r&s^r&o^s&o;E=0|w,_=0|I,w=0|p,I=0|d,p=0|h,d=0|l,({h,l}=f.WQ(0|u,0|c,0|B,0|O)),u=0|a,c=0|o,a=0|n,o=0|s,n=0|i,s=0|r;const P=f.Vl(O,z,x);i=f.Vr(P,B,U,R),r=0|P}({h:i,l:r}=f.WQ(0|this.Ah,0|this.Al,0|i,0|r)),({h:n,l:s}=f.WQ(0|this.Bh,0|this.Bl,0|n,0|s)),({h:a,l:o}=f.WQ(0|this.Ch,0|this.Cl,0|a,0|o)),({h:u,l:c}=f.WQ(0|this.Dh,0|this.Dl,0|u,0|c)),({h,l}=f.WQ(0|this.Eh,0|this.El,0|h,0|l)),({h:p,l:d}=f.WQ(0|this.Fh,0|this.Fl,0|p,0|d)),({h:w,l:I}=f.WQ(0|this.Gh,0|this.Gl,0|w,0|I)),({h:E,l:_}=f.WQ(0|this.Hh,0|this.Hl,0|E,0|_)),this.set(i,r,n,s,a,o,u,c,h,l,p,d,w,I,E,_)}roundClean(){(0,r.uH)(m,b)}destroy(){(0,r.uH)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class I extends w{constructor(){super(48),this.Ah=0|u[0],this.Al=0|u[1],this.Bh=0|u[2],this.Bl=0|u[3],this.Ch=0|u[4],this.Cl=0|u[5],this.Dh=0|u[6],this.Dl=0|u[7],this.Eh=0|u[8],this.El=0|u[9],this.Fh=0|u[10],this.Fl=0|u[11],this.Gh=0|u[12],this.Gl=0|u[13],this.Hh=0|u[14],this.Hl=0|u[15]}}const E=(0,r.qj)(()=>new p),_=(0,r.qj)(()=>new w),A=(0,r.qj)(()=>new I)},9271:(t,e,i)=>{"use strict";i.d(e,{B4:()=>d,CQ:()=>E,CW:()=>I,Ei:()=>l,F8:()=>_,P5:()=>p,TH:()=>A,Vl:()=>b,Vr:()=>w,WM:()=>y,WQ:()=>m,im:()=>g,jm:()=>u,lD:()=>a,qh:()=>h,rE:()=>c,ry:()=>f,xn:()=>o});const r=BigInt(2**32-1),n=BigInt(32);function s(t,e=!1){return e?{h:Number(t&r),l:Number(t>>n&r)}:{h:0|Number(t>>n&r),l:0|Number(t&r)}}function a(t,e=!1){const i=t.length;let r=new Uint32Array(i),n=new Uint32Array(i);for(let a=0;a<i;a++){const{h:i,l:o}=s(t[a],e);[r[a],n[a]]=[i,o]}return[r,n]}const o=(t,e,i)=>t>>>i,u=(t,e,i)=>t<<32-i|e>>>i,c=(t,e,i)=>t>>>i|e<<32-i,f=(t,e,i)=>t<<32-i|e>>>i,h=(t,e,i)=>t<<64-i|e>>>i-32,l=(t,e,i)=>t>>>i-32|e<<64-i,p=(t,e,i)=>t<<i|e>>>32-i,d=(t,e,i)=>e<<i|t>>>32-i,y=(t,e,i)=>e<<i-32|t>>>64-i,g=(t,e,i)=>t<<i-32|e>>>64-i;function m(t,e,i,r){const n=(e>>>0)+(r>>>0);return{h:t+i+(n/2**32|0)|0,l:0|n}}const b=(t,e,i)=>(t>>>0)+(e>>>0)+(i>>>0),w=(t,e,i,r)=>e+i+r+(t/2**32|0)|0,I=(t,e,i,r)=>(t>>>0)+(e>>>0)+(i>>>0)+(r>>>0),E=(t,e,i,r,n)=>e+i+r+n+(t/2**32|0)|0,_=(t,e,i,r,n)=>(t>>>0)+(e>>>0)+(i>>>0)+(r>>>0)+(n>>>0),A=(t,e,i,r,n,s)=>e+i+r+n+s+(t/2**32|0)|0},9336:(t,e,i)=>{"use strict";i.d(e,{compressRawPublicKey:()=>n,toDerSignature:()=>s});var r=i(6862);new Uint8Array([75,69,77,0,16]),new Uint8Array([72,80,75,69,0,16,0,1,0,2]),new Uint8Array([72,80,75,69,45,118,49]),new Uint8Array([115,101,99,114,101,116]),new Uint8Array([101,97,101,95,112,114,107]),new Uint8Array([115,104,97,114,101,100,95,115,101,99,114,101,116]),new Uint8Array([0,32,72,80,75,69,45,118,49,72,80,75,69,0,16,0,1,0,2,107,101,121,0,143,195,174,184,50,73,10,75,90,179,228,32,35,40,125,178,154,31,75,199,194,34,192,223,34,135,39,183,10,64,33,18,47,63,4,233,32,108,209,36,19,80,53,41,180,122,198,166,48,185,46,196,207,125,35,69,8,208,175,151,113,201,158,80]),new Uint8Array([0,12,72,80,75,69,45,118,49,72,80,75,69,0,16,0,1,0,2,98,97,115,101,95,110,111,110,99,101,0,143,195,174,184,50,73,10,75,90,179,228,32,35,40,125,178,154,31,75,199,194,34,192,223,34,135,39,183,10,64,33,18,47,63,4,233,32,108,209,36,19,80,53,41,180,122,198,166,48,185,46,196,207,125,35,69,8,208,175,151,113,201,158,80]);const n=t=>{const e=t.byteLength;var i=t.slice(0,1+e>>>1);return i[0]=2|1&t[e-1],i},s=t=>{const e=(0,r.Ks)(t),i=e.slice(0,32),n=e.slice(32,64),s=t=>{if(void 0===t||0===t.length||void 0===t[0])throw new Error("Invalid integer: input is undefined or empty.");const e=128&t[0]?new Uint8Array([0,...t]):t;return new Uint8Array([2,e.length,...e])},a=s(i),o=s(n),u=new Uint8Array([48,a.length+o.length,...a,...o]);return(0,r.pD)(u)};!function(t){let e=t;for(;e&&!(e.encode&&e.decode&&e.decodeUnsafe)&&e.default;)e=e.default}(i(4840)),function(t){let e=t;for(;e&&!(e.encode&&e.decode&&e.decodeUnsafe)&&e.default;)e=e.default}(i(1307))}},s={};function a(t){var e=s[t];if(void 0!==e)return e.exports;var i=s[t]={id:t,loaded:!1,exports:{}};return n[t].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=n,e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,a.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"==typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"==typeof i.then)return i}var n=Object.create(null);a.r(n);var s={};t=t||[null,e({}),e([]),e(e)];for(var o=2&r&&i;("object"==typeof o||"function"==typeof o)&&!~t.indexOf(o);o=e(o))Object.getOwnPropertyNames(o).forEach(t=>s[t]=()=>i[t]);return s.default=()=>i,a.d(n,s),n},a.d=(t,e)=>{for(var i in e)a.o(e,i)&&!a.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},a.f={},a.e=t=>Promise.all(Object.keys(a.f).reduce((e,i)=>(a.f[i](t,e),e),[])),a.u=t=>t+".turnkey.min.js",a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i={},r="lumenbro-new:",a.l=(t,e,n,s)=>{if(i[t])i[t].push(e);else{var o,u;if(void 0!==n)for(var c=document.getElementsByTagName("script"),f=0;f<c.length;f++){var h=c[f];if(h.getAttribute("src")==t||h.getAttribute("data-webpack")==r+n){o=h;break}}o||(u=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,a.nc&&o.setAttribute("nonce",a.nc),o.setAttribute("data-webpack",r+n),o.src=t),i[t]=[e];var l=(e,r)=>{o.onerror=o.onload=null,clearTimeout(p);var n=i[t];if(delete i[t],o.parentNode&&o.parentNode.removeChild(o),n&&n.forEach(t=>t(r)),e)return e(r)},p=setTimeout(l.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=l.bind(null,o.onerror),o.onload=l.bind(null,o.onload),u&&document.head.appendChild(o)}},a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;a.g.importScripts&&(t=a.g.location+"");var e=a.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");if(i.length)for(var r=i.length-1;r>-1&&(!t||!/^http(s?):/.test(t));)t=i[r--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=t})(),(()=>{var t={792:0};a.f.j=(e,i)=>{var r=a.o(t,e)?t[e]:void 0;if(0!==r)if(r)i.push(r[2]);else{var n=new Promise((i,n)=>r=t[e]=[i,n]);i.push(r[2]=n);var s=a.p+a.u(e),o=new Error;a.l(s,i=>{if(a.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var n=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.src;o.message="Loading chunk "+e+" failed.\n("+n+": "+s+")",o.name="ChunkLoadError",o.type=n,o.request=s,r[1](o)}},"chunk-"+e,e)}};var e=(e,i)=>{var r,n,[s,o,u]=i,c=0;if(s.some(e=>0!==t[e])){for(r in o)a.o(o,r)&&(a.m[r]=o[r]);u&&u(a)}for(e&&e(i);c<s.length;c++)n=s[c],a.o(t,n)&&t[n]&&t[n][0](),t[n]=0},i=self.webpackChunklumenbro_new=self.webpackChunklumenbro_new||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})(),(()=>{"use strict";function t(t){const e=new Uint8Array(t);let i="";for(const t of e)i+=String.fromCharCode(t);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}"undefined"!=typeof window&&void 0!==window.document&&"undefined"!=typeof crypto&&crypto.subtle,"undefined"!=typeof process&&null!=process.versions&&process.versions.node,a(4945);const e="copy",i="convert";function r(t,n,s){if(n===e)return s;if(n===i)return t(s);if(n instanceof Array)return s.map(e=>r(t,n[0],e));if(n instanceof Object){const e={};for(const[i,a]of Object.entries(n)){if(a.derive){const t=a.derive(s);void 0!==t&&(s[i]=t)}if(i in s)null!=s[i]?e[i]=r(t,a.schema,s[i]):e[i]=null;else if(a.required)throw new Error(`Missing key: ${i}`)}return e}}function n(t,e){return{required:!0,schema:t,derive:e}}function s(t){return{required:!0,schema:t}}function o(t){return{required:!1,schema:t}}const u={appid:o(e),appidExclude:o(e),credProps:o(e)},c={type:s(e),id:s(e),rawId:s(i),authenticatorAttachment:o(e),response:s({clientDataJSON:s(i),attestationObject:s(i),transports:n(e,t=>t.getTransports?.()||[])}),clientExtensionResults:n(u,t=>t.getClientExtensionResults())};function f(e){return r(t,c,e)}function h(t){switch(t){case"internal":return"AUTHENTICATOR_TRANSPORT_INTERNAL";case"usb":return"AUTHENTICATOR_TRANSPORT_USB";case"nfc":return"AUTHENTICATOR_TRANSPORT_NFC";case"ble":return"AUTHENTICATOR_TRANSPORT_BLE";case"hybrid":return"AUTHENTICATOR_TRANSPORT_HYBRID";default:throw new Error("unsupported transport format")}}async function l(t){if(!window.PublicKeyCredential)throw new Error("webauthn is not supported by this browser");const e=await async function(t){const e=await navigator.credentials.create(t);return e.toJSON=()=>f(e),e}(t);return{credentialId:(i=e.toJSON()).rawId,attestationObject:i.response.attestationObject,clientDataJson:i.response.clientDataJSON,transports:i.response.transports.map(h)};var i}s(e),s(e),s(i),o(e),s({clientDataJSON:s(i),authenticatorData:s(i),signature:s(i),userHandle:s(i)}),n(u,t=>t.getClientExtensionResults()),Error,Error,Error,Error;const p=["ACTIVITY_STATUS_COMPLETED","ACTIVITY_STATUS_FAILED","ACTIVITY_STATUS_REJECTED"];var d,y;!function(t){t.PublicKeyReady="PUBLIC_KEY_READY",t.InjectCredentialBundle="INJECT_CREDENTIAL_BUNDLE",t.InjectKeyExportBundle="INJECT_KEY_EXPORT_BUNDLE",t.InjectWalletExportBundle="INJECT_WALLET_EXPORT_BUNDLE",t.InjectImportBundle="INJECT_IMPORT_BUNDLE",t.ExtractWalletEncryptedBundle="EXTRACT_WALLET_ENCRYPTED_BUNDLE",t.ExtractKeyEncryptedBundle="EXTRACT_KEY_ENCRYPTED_BUNDLE",t.ApplySettings="APPLY_SETTINGS",t.BundleInjected="BUNDLE_INJECTED",t.EncryptedBundleExtracted="ENCRYPTED_BUNDLE_EXTRACTED",t.SettingsApplied="SETTINGS_APPLIED",t.StampRequest="STAMP_REQUEST",t.Stamp="STAMP",t.TurnkeyInitMessageChannel="TURNKEY_INIT_MESSAGE_CHANNEL",t.GetEmbeddedPublicKey="GET_EMBEDDED_PUBLIC_KEY",t.ClearEmbeddedKey="RESET_EMBEDDED_KEY",t.InitEmbeddedKey="INIT_EMBEDDED_KEY",t.Error="ERROR"}(d||(d={})),function(t){t.Hexadecimal="HEXADECIMAL",t.Solana="SOLANA"}(y||(y={}));const g="copy",m="convert";function b(t){return{required:!0,schema:t}}function w(t){return{required:!1,schema:t}}w(g),w(g),w(g);var I,E;b(g),b(g),b(m),w(g),b({clientDataJSON:b(m),authenticatorData:b(m),signature:b(m),userHandle:b(m)}),a(410),Error,(E=I||(I={})).Ethereum="ethereum",E.Solana="solana",a(9336);var _,A,v,T,S,B="undefined"!=typeof window?window:{localStorage:{getItem:t=>null,setItem:(t,e)=>{},removeItem:t=>{},clear:()=>{},key:t=>null,length:0},location:{hostname:""}};!function(t){t[t.Get=0]="Get",t[t.List=1]="List",t[t.Command=2]="Command"}(_||(_={}));class O extends Error{constructor(t){let e=`Turnkey error ${t.code}: ${t.message}`;null!=t.details&&(e+=` (Details: ${JSON.stringify(t.details)})`),super(e),this.name="TurnkeyRequestError",this.details=t.details??null,this.code=t.code}}!function(t){t.Passkey="passkey",t.Wallet="wallet",t.Iframe="iframe",t.IndexedDb="indexed-db"}(A||(A={})),(S=v||(v={})).Session="@turnkey/session/v2",S.Client="@turnkey/client",function(t){t.Local="local",t.Secure="secure",t.Session="session"}(T||(T={}));const U={[v.Session]:T.Session,[v.Client]:T.Session},z={[T.Local]:B.localStorage,[T.Secure]:B.localStorage,[T.Session]:B.localStorage},R=async t=>{const e=z[U[t]].getItem(t);return e?JSON.parse(e):void 0},x=async(t,e)=>{z[U[t]].setItem(t,JSON.stringify(e))},P=async(t,e)=>{await x(v.Session,t),e&&await x(v.Client,e)};var C,N,D;!function(t){t.READ_ONLY="SESSION_TYPE_READ_ONLY",t.READ_WRITE="SESSION_TYPE_READ_WRITE"}(C||(C={})),function(t){t.COINBASE="FIAT_ON_RAMP_PROVIDER_COINBASE",t.MOONPAY="FIAT_ON_RAMP_PROVIDER_MOONPAY"}(N||(N={})),function(t){t.BITCOIN="FIAT_ON_RAMP_CRYPTO_CURRENCY_BTC",t.ETHEREUM="FIAT_ON_RAMP_CRYPTO_CURRENCY_ETH",t.SOLANA="FIAT_ON_RAMP_CRYPTO_CURRENCY_SOL",t.USDC="FIAT_ON_RAMP_CRYPTO_CURRENCY_USDC"}(D||(D={}));var M,L,Y=a(8287);function q(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function K(t){if("boolean"!=typeof t)throw new Error(`boolean expected, not ${t}`)}function V(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function k(t,...e){if(!q(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function H(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function F(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function j(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}a(4840),Error,M=globalThis,L={},new Proxy(M,{get:(t,e,i)=>e in L?L[e]:M[e],set:(t,e,i)=>(e in L&&delete L[e],M[e]=i,!0),deleteProperty(t,e){let i=!1;return e in L&&(delete L[e],i=!0),e in M&&(delete M[e],i=!0),i},ownKeys(t){const e=Reflect.ownKeys(M),i=Reflect.ownKeys(L),r=new Set(i);return[...e.filter(t=>!r.has(t)),...i]},defineProperty:(t,e,i)=>(e in L&&delete L[e],Reflect.defineProperty(M,e,i),!0),getOwnPropertyDescriptor:(t,e)=>e in L?Reflect.getOwnPropertyDescriptor(L,e):Reflect.getOwnPropertyDescriptor(M,e),has:(t,e)=>e in L||e in M}),new Uint8Array(0),new Uint8Array([75,69,77,0,0]),new Uint8Array([101,97,101,95,112,114,107]),new Uint8Array([115,104,97,114,101,100,95,115,101,99,114,101,116]),new Uint8Array([100,107,112,95,112,114,107]),new Uint8Array([115,107]),new Uint8Array([99,97,110,100,105,100,97,116,101]),new Uint8Array([255,255,255,255,0,0,0,0,255,255,255,255,255,255,255,255,188,230,250,173,167,23,158,132,243,185,202,194,252,99,37,81]),new Uint8Array([255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,199,99,77,129,244,55,45,223,88,26,13,178,72,176,167,122,236,236,25,106,204,197,41,115]),new Uint8Array([1,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,250,81,134,135,131,191,47,150,107,127,204,1,72,247,9,165,208,59,181,201,184,137,156,71,174,187,111,183,30,145,56,100,9]),new Uint8Array([48,65,2,1,0,48,19,6,7,42,134,72,206,61,2,1,6,8,42,134,72,206,61,3,1,7,4,39,48,37,2,1,1,4,32]),new Uint8Array([48,78,2,1,0,48,16,6,7,42,134,72,206,61,2,1,6,5,43,129,4,0,34,4,55,48,53,2,1,1,4,48]),new Uint8Array([48,96,2,1,0,48,16,6,7,42,134,72,206,61,2,1,6,5,43,129,4,0,35,4,73,48,71,2,1,1,4,66]),new Uint8Array([72,80,75,69,45,118,49]),new Uint8Array([115,101,99]),new Uint8Array([98,97,115,101,95,110,111,110,99,101]),new Uint8Array([101,120,112]),new Uint8Array([105,110,102,111,95,104,97,115,104]),new Uint8Array([107,101,121]),new Uint8Array([112,115,107,95,105,100,95,104,97,115,104]),new Uint8Array([115,101,99,114,101,116]),new Uint8Array([72,80,75,69,0,0,0,0,0,0]),new Uint8Array([48,46,2,1,0,48,5,6,3,43,101,110,4,34,4,32]),new Uint8Array([48,70,2,1,0,48,5,6,3,43,101,111,4,58,4,56]);function J(t){if("string"==typeof t)t=function(t){if("string"!=typeof t)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(t))}(t);else{if(!q(t))throw new Error("Uint8Array expected, got "+typeof t);t=$(t)}return t}function W(t,e,i=!0){if(void 0===e)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(i&&e.byteOffset%4!=0)throw new Error("invalid output, must be aligned");return e}function G(t,e,i,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,i,r);const n=BigInt(32),s=BigInt(4294967295),a=Number(i>>n&s),o=Number(i&s),u=r?4:0,c=r?0:4;t.setUint32(e+u,a,r),t.setUint32(e+c,o,r)}function $(t){return Uint8Array.from(t)}const Z=t=>Uint8Array.from(t.split("").map(t=>t.charCodeAt(0))),X=Z("expand 16-byte k"),Q=Z("expand 32-byte k"),tt=F(X),et=F(Q);function it(t,e){return t<<e|t>>>32-e}function rt(t){return t.byteOffset%4==0}const nt=2**32-1,st=new Uint32Array;function at(t,e){const{allowShortKeys:i,extendNonceFn:r,counterLength:n,counterRight:s,rounds:a}=function(t,e){if(null==e||"object"!=typeof e)throw new Error("options must be defined");return Object.assign({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e)}(0,e);if("function"!=typeof t)throw new Error("core must be a function");return V(n),V(a),K(s),K(i),(e,o,u,c,f=0)=>{k(e),k(o),k(u);const h=u.length;if(void 0===c&&(c=new Uint8Array(h)),k(c),V(f),f<0||f>=nt)throw new Error("arx: counter overflow");if(c.length<h)throw new Error(`arx: output (${c.length}) is shorter than data (${h})`);const l=[];let p,d,y=e.length;if(32===y)l.push(p=$(e)),d=et;else{if(16!==y||!i)throw new Error(`arx: invalid 32-byte key, got length=${y}`);p=new Uint8Array(32),p.set(e),p.set(e,16),d=tt,l.push(p)}rt(o)||l.push(o=$(o));const g=F(p);if(r){if(24!==o.length)throw new Error("arx: extended nonce must be 24 bytes");r(d,g,F(o.subarray(0,16)),g),o=o.subarray(16)}const m=16-n;if(m!==o.length)throw new Error(`arx: nonce must be ${m} or 16 bytes`);if(12!==m){const t=new Uint8Array(12);t.set(o,s?0:12-o.length),o=t,l.push(o)}const b=F(o);return function(t,e,i,r,n,s,a,o){const u=n.length,c=new Uint8Array(64),f=F(c),h=rt(n)&&rt(s),l=h?F(n):st,p=h?F(s):st;for(let d=0;d<u;a++){if(t(e,i,r,f,a,o),a>=nt)throw new Error("arx: counter overflow");const y=Math.min(64,u-d);if(h&&64===y){const t=d/4;if(d%4!=0)throw new Error("arx: invalid block position");for(let e,i=0;i<16;i++)e=t+i,p[e]=l[e]^f[i];d+=64;continue}for(let t,e=0;e<y;e++)t=d+e,s[t]=n[t]^c[e];d+=y}}(t,d,g,b,u,c,f,a),j(...l),c}}const ot=(t,e)=>255&t[e++]|(255&t[e++])<<8;class ut{constructor(t){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,k(t=J(t),32);const e=ot(t,0),i=ot(t,2),r=ot(t,4),n=ot(t,6),s=ot(t,8),a=ot(t,10),o=ot(t,12),u=ot(t,14);this.r[0]=8191&e,this.r[1]=8191&(e>>>13|i<<3),this.r[2]=7939&(i>>>10|r<<6),this.r[3]=8191&(r>>>7|n<<9),this.r[4]=255&(n>>>4|s<<12),this.r[5]=s>>>1&8190,this.r[6]=8191&(s>>>14|a<<2),this.r[7]=8065&(a>>>11|o<<5),this.r[8]=8191&(o>>>8|u<<8),this.r[9]=u>>>5&127;for(let e=0;e<8;e++)this.pad[e]=ot(t,16+2*e)}process(t,e,i=!1){const r=i?0:2048,{h:n,r:s}=this,a=s[0],o=s[1],u=s[2],c=s[3],f=s[4],h=s[5],l=s[6],p=s[7],d=s[8],y=s[9],g=ot(t,e+0),m=ot(t,e+2),b=ot(t,e+4),w=ot(t,e+6),I=ot(t,e+8),E=ot(t,e+10),_=ot(t,e+12),A=ot(t,e+14);let v=n[0]+(8191&g),T=n[1]+(8191&(g>>>13|m<<3)),S=n[2]+(8191&(m>>>10|b<<6)),B=n[3]+(8191&(b>>>7|w<<9)),O=n[4]+(8191&(w>>>4|I<<12)),U=n[5]+(I>>>1&8191),z=n[6]+(8191&(I>>>14|E<<2)),R=n[7]+(8191&(E>>>11|_<<5)),x=n[8]+(8191&(_>>>8|A<<8)),P=n[9]+(A>>>5|r),C=0,N=C+v*a+T*(5*y)+S*(5*d)+B*(5*p)+O*(5*l);C=N>>>13,N&=8191,N+=U*(5*h)+z*(5*f)+R*(5*c)+x*(5*u)+P*(5*o),C+=N>>>13,N&=8191;let D=C+v*o+T*a+S*(5*y)+B*(5*d)+O*(5*p);C=D>>>13,D&=8191,D+=U*(5*l)+z*(5*h)+R*(5*f)+x*(5*c)+P*(5*u),C+=D>>>13,D&=8191;let M=C+v*u+T*o+S*a+B*(5*y)+O*(5*d);C=M>>>13,M&=8191,M+=U*(5*p)+z*(5*l)+R*(5*h)+x*(5*f)+P*(5*c),C+=M>>>13,M&=8191;let L=C+v*c+T*u+S*o+B*a+O*(5*y);C=L>>>13,L&=8191,L+=U*(5*d)+z*(5*p)+R*(5*l)+x*(5*h)+P*(5*f),C+=L>>>13,L&=8191;let Y=C+v*f+T*c+S*u+B*o+O*a;C=Y>>>13,Y&=8191,Y+=U*(5*y)+z*(5*d)+R*(5*p)+x*(5*l)+P*(5*h),C+=Y>>>13,Y&=8191;let q=C+v*h+T*f+S*c+B*u+O*o;C=q>>>13,q&=8191,q+=U*a+z*(5*y)+R*(5*d)+x*(5*p)+P*(5*l),C+=q>>>13,q&=8191;let K=C+v*l+T*h+S*f+B*c+O*u;C=K>>>13,K&=8191,K+=U*o+z*a+R*(5*y)+x*(5*d)+P*(5*p),C+=K>>>13,K&=8191;let V=C+v*p+T*l+S*h+B*f+O*c;C=V>>>13,V&=8191,V+=U*u+z*o+R*a+x*(5*y)+P*(5*d),C+=V>>>13,V&=8191;let k=C+v*d+T*p+S*l+B*h+O*f;C=k>>>13,k&=8191,k+=U*c+z*u+R*o+x*a+P*(5*y),C+=k>>>13,k&=8191;let H=C+v*y+T*d+S*p+B*l+O*h;C=H>>>13,H&=8191,H+=U*f+z*c+R*u+x*o+P*a,C+=H>>>13,H&=8191,C=(C<<2)+C|0,C=C+N|0,N=8191&C,C>>>=13,D+=C,n[0]=N,n[1]=D,n[2]=M,n[3]=L,n[4]=Y,n[5]=q,n[6]=K,n[7]=V,n[8]=k,n[9]=H}finalize(){const{h:t,pad:e}=this,i=new Uint16Array(10);let r=t[1]>>>13;t[1]&=8191;for(let e=2;e<10;e++)t[e]+=r,r=t[e]>>>13,t[e]&=8191;t[0]+=5*r,r=t[0]>>>13,t[0]&=8191,t[1]+=r,r=t[1]>>>13,t[1]&=8191,t[2]+=r,i[0]=t[0]+5,r=i[0]>>>13,i[0]&=8191;for(let e=1;e<10;e++)i[e]=t[e]+r,r=i[e]>>>13,i[e]&=8191;i[9]-=8192;let n=(1^r)-1;for(let t=0;t<10;t++)i[t]&=n;n=~n;for(let e=0;e<10;e++)t[e]=t[e]&n|i[e];t[0]=65535&(t[0]|t[1]<<13),t[1]=65535&(t[1]>>>3|t[2]<<10),t[2]=65535&(t[2]>>>6|t[3]<<7),t[3]=65535&(t[3]>>>9|t[4]<<4),t[4]=65535&(t[4]>>>12|t[5]<<1|t[6]<<14),t[5]=65535&(t[6]>>>2|t[7]<<11),t[6]=65535&(t[7]>>>5|t[8]<<8),t[7]=65535&(t[8]>>>8|t[9]<<5);let s=t[0]+e[0];t[0]=65535&s;for(let i=1;i<8;i++)s=(t[i]+e[i]|0)+(s>>>16)|0,t[i]=65535&s;j(i)}update(t){H(this),k(t=J(t));const{buffer:e,blockLen:i}=this,r=t.length;for(let n=0;n<r;){const s=Math.min(i-this.pos,r-n);if(s!==i)e.set(t.subarray(n,n+s),this.pos),this.pos+=s,n+=s,this.pos===i&&(this.process(e,0,!1),this.pos=0);else for(;i<=r-n;n+=i)this.process(t,n)}return this}destroy(){j(this.h,this.r,this.buffer,this.pad)}digestInto(t){H(this),function(t,e){k(t);const i=e.outputLen;if(t.length<i)throw new Error("digestInto() expects output buffer of length at least "+i)}(t,this),this.finished=!0;const{buffer:e,h:i}=this;let{pos:r}=this;if(r){for(e[r++]=1;r<16;r++)e[r]=0;this.process(e,0,!0)}this.finalize();let n=0;for(let e=0;e<8;e++)t[n++]=i[e]>>>0,t[n++]=i[e]>>>8;return t}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const i=t.slice(0,e);return this.destroy(),i}}const ct=function(t){const e=(e,i)=>t(i).update(J(e)).digest(),i=t(new Uint8Array(32));return e.outputLen=i.outputLen,e.blockLen=i.blockLen,e.create=e=>t(e),e}(t=>new ut(t));function ft(t,e,i,r,n,s=20){let a=t[0],o=t[1],u=t[2],c=t[3],f=e[0],h=e[1],l=e[2],p=e[3],d=e[4],y=e[5],g=e[6],m=e[7],b=n,w=i[0],I=i[1],E=i[2],_=a,A=o,v=u,T=c,S=f,B=h,O=l,U=p,z=d,R=y,x=g,P=m,C=b,N=w,D=I,M=E;for(let t=0;t<s;t+=2)_=_+S|0,C=it(C^_,16),z=z+C|0,S=it(S^z,12),_=_+S|0,C=it(C^_,8),z=z+C|0,S=it(S^z,7),A=A+B|0,N=it(N^A,16),R=R+N|0,B=it(B^R,12),A=A+B|0,N=it(N^A,8),R=R+N|0,B=it(B^R,7),v=v+O|0,D=it(D^v,16),x=x+D|0,O=it(O^x,12),v=v+O|0,D=it(D^v,8),x=x+D|0,O=it(O^x,7),T=T+U|0,M=it(M^T,16),P=P+M|0,U=it(U^P,12),T=T+U|0,M=it(M^T,8),P=P+M|0,U=it(U^P,7),_=_+B|0,M=it(M^_,16),x=x+M|0,B=it(B^x,12),_=_+B|0,M=it(M^_,8),x=x+M|0,B=it(B^x,7),A=A+O|0,C=it(C^A,16),P=P+C|0,O=it(O^P,12),A=A+O|0,C=it(C^A,8),P=P+C|0,O=it(O^P,7),v=v+U|0,N=it(N^v,16),z=z+N|0,U=it(U^z,12),v=v+U|0,N=it(N^v,8),z=z+N|0,U=it(U^z,7),T=T+S|0,D=it(D^T,16),R=R+D|0,S=it(S^R,12),T=T+S|0,D=it(D^T,8),R=R+D|0,S=it(S^R,7);let L=0;r[L++]=a+_|0,r[L++]=o+A|0,r[L++]=u+v|0,r[L++]=c+T|0,r[L++]=f+S|0,r[L++]=h+B|0,r[L++]=l+O|0,r[L++]=p+U|0,r[L++]=d+z|0,r[L++]=y+R|0,r[L++]=g+x|0,r[L++]=m+P|0,r[L++]=b+C|0,r[L++]=w+N|0,r[L++]=I+D|0,r[L++]=E+M|0}const ht=at(ft,{counterRight:!1,counterLength:4,allowShortKeys:!1}),lt=at(ft,{counterRight:!1,counterLength:8,extendNonceFn:function(t,e,i,r){let n=t[0],s=t[1],a=t[2],o=t[3],u=e[0],c=e[1],f=e[2],h=e[3],l=e[4],p=e[5],d=e[6],y=e[7],g=i[0],m=i[1],b=i[2],w=i[3];for(let t=0;t<20;t+=2)n=n+u|0,g=it(g^n,16),l=l+g|0,u=it(u^l,12),n=n+u|0,g=it(g^n,8),l=l+g|0,u=it(u^l,7),s=s+c|0,m=it(m^s,16),p=p+m|0,c=it(c^p,12),s=s+c|0,m=it(m^s,8),p=p+m|0,c=it(c^p,7),a=a+f|0,b=it(b^a,16),d=d+b|0,f=it(f^d,12),a=a+f|0,b=it(b^a,8),d=d+b|0,f=it(f^d,7),o=o+h|0,w=it(w^o,16),y=y+w|0,h=it(h^y,12),o=o+h|0,w=it(w^o,8),y=y+w|0,h=it(h^y,7),n=n+c|0,w=it(w^n,16),d=d+w|0,c=it(c^d,12),n=n+c|0,w=it(w^n,8),d=d+w|0,c=it(c^d,7),s=s+f|0,g=it(g^s,16),y=y+g|0,f=it(f^y,12),s=s+f|0,g=it(g^s,8),y=y+g|0,f=it(f^y,7),a=a+h|0,m=it(m^a,16),l=l+m|0,h=it(h^l,12),a=a+h|0,m=it(m^a,8),l=l+m|0,h=it(h^l,7),o=o+u|0,b=it(b^o,16),p=p+b|0,u=it(u^p,12),o=o+u|0,b=it(b^o,8),p=p+b|0,u=it(u^p,7);let I=0;r[I++]=n,r[I++]=s,r[I++]=a,r[I++]=o,r[I++]=g,r[I++]=m,r[I++]=b,r[I++]=w},allowShortKeys:!1}),pt=new Uint8Array(16),dt=(t,e)=>{t.update(e);const i=e.length%16;i&&t.update(pt.subarray(i))},yt=new Uint8Array(32);function gt(t,e,i,r,n){const s=t(e,i,yt),a=ct.create(s);n&&dt(a,n),dt(a,r);const o=function(t,e,i){K(i);const r=new Uint8Array(16),n=(s=r,new DataView(s.buffer,s.byteOffset,s.byteLength));var s;return G(n,0,BigInt(e),i),G(n,8,BigInt(t),i),r}(r.length,n?n.length:0,!0);a.update(o);const u=a.digest();return j(s,o),u}const mt=t=>(e,i,r)=>({encrypt(n,s){const a=n.length;(s=W(a+16,s,!1)).set(n);const o=s.subarray(0,-16);t(e,i,o,o,1);const u=gt(t,e,i,o,r);return s.set(u,a),j(u),s},decrypt(n,s){s=W(n.length-16,s,!1);const a=n.subarray(0,-16),o=n.subarray(-16),u=gt(t,e,i,a,r);if(!function(t,e){if(t.length!==e.length)return!1;let i=0;for(let r=0;r<t.length;r++)i|=t[r]^e[r];return 0===i}(o,u))throw new Error("invalid tag");return s.set(n.subarray(0,-16)),t(e,i,s,s,1),j(u),s}});mt(ht),mt(lt),a(1454),a(8226);var bt=a(8442),wt=a(2531),It=a(615),Et=a(1848),_t=a(8030);const At=BigInt(0),vt=BigInt(1),Tt=BigInt(2),St=BigInt(8);function Bt(t,e={}){const{Fp:i,Fn:r}=(0,It.UT)("edwards",t,e),{h:n,n:s}=t;(0,Et.DS)(e,{},{uvRatio:"function"});const a=Tt<<BigInt(8*r.BYTES)-vt,o=t=>i.create(t),u=e.uvRatio||((t,e)=>{try{return{isValid:!0,value:i.sqrt(i.div(t,e))}}catch(t){return{isValid:!1,value:At}}});if(!function(t,e,i,r){const n=t.sqr(i),s=t.sqr(r),a=t.add(t.mul(e.a,n),s),o=t.add(t.ONE,t.mul(e.d,t.mul(n,s)));return t.eql(a,o)}(i,t,t.Gx,t.Gy))throw new Error("bad curve params: generator point");function c(t,e,i=!1){const r=i?vt:At;return(0,Et.aK)("coordinate "+t,e,r,a),e}function f(t){if(!(t instanceof p))throw new Error("ExtendedPoint expected")}const h=(0,Et.x)((t,e)=>{const{X:r,Y:n,Z:s}=t,a=t.is0();null==e&&(e=a?St:i.inv(s));const u=o(r*e),c=o(n*e),f=i.mul(s,e);if(a)return{x:At,y:vt};if(f!==vt)throw new Error("invZ was invalid");return{x:u,y:c}}),l=(0,Et.x)(e=>{const{a:i,d:r}=t;if(e.is0())throw new Error("bad point: ZERO");const{X:n,Y:s,Z:a,T:u}=e,c=o(n*n),f=o(s*s),h=o(a*a),l=o(h*h),p=o(c*i);if(o(h*o(p+f))!==o(l+o(r*o(c*f))))throw new Error("bad point: equation left != right (1)");if(o(n*s)!==o(a*u))throw new Error("bad point: equation left != right (2)");return!0});class p{constructor(t,e,i,r){this.X=c("x",t),this.Y=c("y",e),this.Z=c("z",i,!0),this.T=c("t",r),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(t){return(0,It.Ak)(p,t)}static msm(t,e){return(0,It.Xf)(p,r,t,e)}_setWindowSize(t){this.precompute(t)}static fromAffine(t){if(t instanceof p)throw new Error("extended point not allowed");const{x:e,y:i}=t||{};return c("x",e),c("y",i),new p(e,i,vt,o(e*i))}precompute(t=8,e=!0){return d.createCache(this,t),e||this.multiply(Tt),this}assertValidity(){l(this)}equals(t){f(t);const{X:e,Y:i,Z:r}=this,{X:n,Y:s,Z:a}=t,u=o(e*a),c=o(n*r),h=o(i*a),l=o(s*r);return u===c&&h===l}is0(){return this.equals(p.ZERO)}negate(){return new p(o(-this.X),this.Y,this.Z,o(-this.T))}double(){const{a:e}=t,{X:i,Y:r,Z:n}=this,s=o(i*i),a=o(r*r),u=o(Tt*o(n*n)),c=o(e*s),f=i+r,h=o(o(f*f)-s-a),l=c+a,d=l-u,y=c-a,g=o(h*d),m=o(l*y),b=o(h*y),w=o(d*l);return new p(g,m,w,b)}add(e){f(e);const{a:i,d:r}=t,{X:n,Y:s,Z:a,T:u}=this,{X:c,Y:h,Z:l,T:d}=e,y=o(n*c),g=o(s*h),m=o(u*r*d),b=o(a*l),w=o((n+s)*(c+h)-y-g),I=b-m,E=b+m,_=o(g-i*y),A=o(w*I),v=o(E*_),T=o(w*_),S=o(I*E);return new p(A,v,S,T)}subtract(t){return this.add(t.negate())}multiply(t){const e=t;(0,Et.aK)("scalar",e,vt,s);const{p:i,f:r}=d.cached(this,e,t=>(0,It.Ak)(p,t));return(0,It.Ak)(p,[i,r])[0]}multiplyUnsafe(t,e=p.ZERO){const i=t;return(0,Et.aK)("scalar",i,At,s),i===At?p.ZERO:this.is0()||i===vt?this:d.unsafe(this,i,t=>(0,It.Ak)(p,t),e)}isSmallOrder(){return this.multiplyUnsafe(n).is0()}isTorsionFree(){return d.unsafe(this,s).is0()}toAffine(t){return h(this,t)}clearCofactor(){return n===vt?this:this.multiplyUnsafe(n)}static fromBytes(t,e=!1){return(0,wt.DO)(t),p.fromHex(t,e)}static fromHex(e,r=!1){const{d:n,a:s}=t,c=i.BYTES;e=(0,Et.qj)("pointHex",e,c),(0,Et.e8)("zip215",r);const f=e.slice(),h=e[c-1];f[c-1]=-129&h;const l=(0,Et.lX)(f),d=r?a:i.ORDER;(0,Et.aK)("pointHex.y",l,At,d);const y=o(l*l),g=o(y-vt),m=o(n*y-s);let{isValid:b,value:w}=u(g,m);if(!b)throw new Error("Point.fromHex: invalid y coordinate");const I=(w&vt)===vt,E=!!(128&h);if(!r&&w===At&&E)throw new Error("Point.fromHex: x=0 and x_0=1");return E!==I&&(w=o(-w)),p.fromAffine({x:w,y:l})}toBytes(){const{x:t,y:e}=this.toAffine(),r=(0,Et.z)(e,i.BYTES);return r[r.length-1]|=t&vt?128:0,r}toRawBytes(){return this.toBytes()}toHex(){return(0,wt.My)(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}p.BASE=new p(t.Gx,t.Gy,vt,o(t.Gx*t.Gy)),p.ZERO=new p(At,vt,vt,At),p.Fp=i,p.Fn=r;const d=new It.hT(p,8*r.BYTES);return p}class Ot{constructor(t){this.ep=t}static fromBytes(t){throw new Error("fromBytes must be implemented by subclass")}static fromHex(t){throw new Error("fromHex must be implemented by subclass")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}clearCofactor(){return this}assertValidity(){this.ep.assertValidity()}toAffine(t){return this.ep.toAffine(t)}toRawBytes(){return this.toBytes()}toHex(){return(0,wt.My)(this.toBytes())}toString(){return this.toHex()}isTorsionFree(){return!0}isSmallOrder(){return!1}add(t){return this.assertSame(t),this.init(this.ep.add(t.ep))}subtract(t){return this.assertSame(t),this.init(this.ep.subtract(t.ep))}multiply(t){return this.init(this.ep.multiply(t))}multiplyUnsafe(t){return this.init(this.ep.multiplyUnsafe(t))}double(){return this.init(this.ep.double())}negate(){return this.init(this.ep.negate())}precompute(t,e){return this.init(this.ep.precompute(t,e))}}function Ut(t){const{CURVE:e,curveOpts:i,hash:r,eddsaOpts:n}=function(t){const e={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},i={Fp:t.Fp,Fn:(0,_t.D0)(e.n,t.nBitLength,!0),uvRatio:t.uvRatio},r={randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:e,curveOpts:i,hash:t.hash,eddsaOpts:r}}(t);return function(t,e){return Object.assign({},e,{ExtendedPoint:e.Point,CURVE:t})}(t,function(t,e,i){if("function"!=typeof e)throw new Error('"hash" function param is required');(0,Et.DS)(i,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r}=i,{BASE:n,Fp:s,Fn:a}=t,o=a.ORDER,u=i.randomBytes||wt.po,c=i.adjustScalarBytes||(t=>t),f=i.domain||((t,e,i)=>{if((0,Et.e8)("phflag",i),e.length||i)throw new Error("Contexts/pre-hash are not supported");return t});function h(t){return a.create(t)}function l(t){return h((0,Et.lX)(t))}function p(t){const{head:i,prefix:r,scalar:a}=function(t){const i=s.BYTES;t=(0,Et.qj)("private key",t,i);const r=(0,Et.qj)("hashed private key",e(t),2*i),n=c(r.slice(0,i));return{head:n,prefix:r.slice(i,2*i),scalar:l(n)}}(t),o=n.multiply(a),u=o.toBytes();return{head:i,prefix:r,scalar:a,point:o,pointBytes:u}}function d(t){return p(t).pointBytes}function y(t=Uint8Array.of(),...i){const n=(0,wt.Id)(...i);return l(e(f(n,(0,Et.qj)("context",t),!!r)))}const g={zip215:!0};n.precompute(8);const m=s.BYTES,b={secret:m,public:m,signature:2*m,seed:m};function w(t=u(b.seed)){return t}const I={getExtendedPublicKey:p,randomSecretKey:w,isValidSecretKey:function(t){try{return!!a.fromBytes(t,!1)}catch(t){return!1}},isValidPublicKey:function(e,i){try{return!!t.fromBytes(e,i)}catch(t){return!1}},randomPrivateKey:w,toMontgomery(e){const{y:i}=t.fromBytes(e),r=32===m;if(!r&&57!==m)throw new Error("only defined for 25519 and 448");const n=r?s.div(vt+i,vt-i):s.div(i-vt,i+vt);return s.toBytes(n)},toMontgomeryPriv(t){(0,wt.DO)(t,m);const i=e(t.subarray(0,m));return c(i).subarray(0,m)},precompute:(e=8,i=t.BASE)=>i.precompute(e,!1)};return Object.freeze({keygen:function(t){const e=I.randomSecretKey(t);return{secretKey:e,publicKey:d(e)}},getPublicKey:d,sign:function(t,e,i={}){t=(0,Et.qj)("message",t),r&&(t=r(t));const{prefix:a,scalar:u,pointBytes:c}=p(e),f=y(i.context,a,t),l=n.multiply(f).toBytes(),d=h(f+y(i.context,l,c,t)*u);(0,Et.aK)("signature.s",d,At,o);const g=s.BYTES,m=(0,wt.Id)(l,(0,Et.z)(d,g));return(0,Et.qj)("result",m,2*g)},verify:function(e,i,a,o=g){const{context:u,zip215:c}=o,f=s.BYTES;e=(0,Et.qj)("signature",e,2*f),i=(0,Et.qj)("message",i),a=(0,Et.qj)("publicKey",a,f),void 0!==c&&(0,Et.e8)("zip215",c),r&&(i=r(i));const h=(0,Et.lX)(e.slice(f,2*f));let l,p,d;try{l=t.fromHex(a,c),p=t.fromHex(e.slice(0,f),c),d=n.multiplyUnsafe(h)}catch(t){return!1}if(!c&&l.isSmallOrder())return!1;const m=y(u,p.toBytes(),l.toBytes(),i);return p.add(l.multiplyUnsafe(m)).subtract(d).clearCofactor().is0()},utils:I,Point:t,info:{type:"edwards",lengths:b}})}(Bt(e,i),r,n))}(0,wt.AI)("HashToScalar-"),BigInt(0),BigInt(1),BigInt(2);const zt=BigInt(0),Rt=BigInt(1),xt=BigInt(2),Pt=(BigInt(3),BigInt(5)),Ct=BigInt(8),Nt={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Ct,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Dt(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const Mt=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function Lt(t,e){const i=Nt.p,r=(0,_t.zi)(e*e*e,i),n=function(t){const e=BigInt(10),i=BigInt(20),r=BigInt(40),n=BigInt(80),s=Nt.p,a=t*t%s*t%s,o=(0,_t.zH)(a,xt,s)*a%s,u=(0,_t.zH)(o,Rt,s)*t%s,c=(0,_t.zH)(u,Pt,s)*u%s,f=(0,_t.zH)(c,e,s)*c%s,h=(0,_t.zH)(f,i,s)*f%s,l=(0,_t.zH)(h,r,s)*h%s,p=(0,_t.zH)(l,n,s)*l%s,d=(0,_t.zH)(p,n,s)*l%s,y=(0,_t.zH)(d,e,s)*c%s;return{pow_p_5_8:(0,_t.zH)(y,xt,s)*t%s,b2:a}}(t*(0,_t.zi)(r*r*e,i)).pow_p_5_8;let s=(0,_t.zi)(t*r*n,i);const a=(0,_t.zi)(e*s*s,i),o=s,u=(0,_t.zi)(s*Mt,i),c=a===t,f=a===(0,_t.zi)(-t,i),h=a===(0,_t.zi)(-t*Mt,i);return c&&(s=o),(f||h)&&(s=u),(0,_t.dQ)(s,i)&&(s=(0,_t.zi)(-s,i)),{isValid:c||f,value:s}}const Yt=(()=>(0,_t.D0)(Nt.p,{isLE:!0}))(),qt=(()=>(0,_t.D0)(Nt.n,{isLE:!0}))(),Kt=(()=>({...Nt,Fp:Yt,hash:bt.Zf,adjustScalarBytes:Dt,uvRatio:Lt}))(),Vt=(()=>Ut(Kt))(),kt=Mt,Ht=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),Ft=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),jt=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),Jt=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),Wt=t=>Lt(Rt,t),Gt=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),$t=t=>Vt.CURVE.Fp.create((0,Et.lX)(t)&Gt);function Zt(t){const{d:e}=Vt.CURVE,i=Vt.CURVE.Fp.ORDER,r=Vt.CURVE.Fp.create,n=r(kt*t*t),s=r((n+Rt)*jt);let a=BigInt(-1);const o=r((a-e*n)*r(n+e));let{isValid:u,value:c}=Lt(s,o),f=r(c*t);(0,_t.dQ)(f,i)||(f=r(-f)),u||(c=f),u||(a=n);const h=r(a*(n-Rt)*Jt-o),l=c*c,p=r((c+c)*o),d=r(h*Ht),y=r(Rt-l),g=r(Rt+l);return new Vt.Point(r(p*g),r(y*d),r(d*g),r(p*y))}class Xt extends Ot{constructor(t){super(t)}static fromAffine(t){return new Xt(Vt.Point.fromAffine(t))}assertSame(t){if(!(t instanceof Xt))throw new Error("RistrettoPoint expected")}init(t){return new Xt(t)}static hashToCurve(t){return function(t){(0,wt.DO)(t,64);const e=Zt($t(t.subarray(0,32))),i=Zt($t(t.subarray(32,64)));return new Xt(e.add(i))}((0,Et.qj)("ristrettoHash",t,64))}static fromBytes(t){(0,wt.DO)(t,32);const{a:e,d:i}=Vt.CURVE,r=Yt.ORDER,n=Yt.create,s=$t(t);if(!(0,Et.ex)((0,Et.z)(s,32),t)||(0,_t.dQ)(s,r))throw new Error("invalid ristretto255 encoding 1");const a=n(s*s),o=n(Rt+e*a),u=n(Rt-e*a),c=n(o*o),f=n(u*u),h=n(e*i*c-f),{isValid:l,value:p}=Wt(n(h*f)),d=n(p*u),y=n(p*d*h);let g=n((s+s)*d);(0,_t.dQ)(g,r)&&(g=n(-g));const m=n(o*y),b=n(g*m);if(!l||(0,_t.dQ)(b,r)||m===zt)throw new Error("invalid ristretto255 encoding 2");return new Xt(new Vt.Point(g,m,Rt,b))}static fromHex(t){return Xt.fromBytes((0,Et.qj)("ristrettoHex",t,32))}static msm(t,e){return(0,It.Xf)(Xt,Vt.Point.Fn,t,e)}toBytes(){let{X:t,Y:e,Z:i,T:r}=this.ep;const n=Yt.ORDER,s=Yt.create,a=s(s(i+e)*s(i-e)),o=s(t*e),u=s(o*o),{value:c}=Wt(s(a*u)),f=s(c*a),h=s(c*o),l=s(f*h*r);let p;if((0,_t.dQ)(r*l,n)){let i=s(e*kt),r=s(t*kt);t=i,e=r,p=s(f*Ft)}else p=h;(0,_t.dQ)(t*l,n)&&(e=s(-e));let d=s((i-e)*p);return(0,_t.dQ)(d,n)&&(d=s(-d)),(0,Et.z)(d,32)}equals(t){this.assertSame(t);const{X:e,Y:i}=this.ep,{X:r,Y:n}=t.ep,s=Yt.create,a=s(e*n)===s(i*r),o=s(i*n)===s(e*r);return a||o}is0(){return this.equals(Xt.ZERO)}}Xt.BASE=(()=>new Xt(Vt.Point.BASE))(),Xt.ZERO=(()=>new Xt(Vt.Point.ZERO))(),Xt.Fp=Yt,Xt.Fn=qt,bt.Zf,bt.qt;var Qt=a(7238);const te={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x3fffffffffffffffffffffffffffffffffffffffffffffffffffffff7cca23e9c44edb49aed63690216cc2728dc58f552378c292ab5844f3"),h:BigInt(4),a:BigInt(1),d:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffffffffffffffffffffffffffffffffffffffffffffffff6756"),Gx:BigInt("0x4f1970c66bed0ded221d15a622bf36da9e146570470f1767ea6de324a3d3a46412ae1af72ab66511433b80e18b00938e2626a82bc70cc05e"),Gy:BigInt("0x693f46716eb6bc248876203756c9c7624bea73736ca3984087789c1e05a0c2d73ad3ff1ce67c39c4fdbd132c4ed7c8ad9808795bf230fa14")},ee=Object.assign({},te,{d:BigInt("0xd78b4bdc7f0daf19f24f38c29373a2ccad46157242a50f37809b1da3412a12e79ccc9c81264cfe9ad080997058fb61c4243cc32dbaa156b9"),Gx:BigInt("0x79a70b2b70400553ae7c9df416c792c61128751ac92969240c25a07d728bdc93e21f7787ed6972249de732f38496cd11698713093e9c04fc"),Gy:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffff80000000000000000000000000000000000000000000000000000001")}),ie=(0,wt.qj)(()=>Qt.mh.create({dkLen:114})),re=BigInt(1),ne=BigInt(2),se=BigInt(3),ae=BigInt(4),oe=BigInt(11),ue=BigInt(22),ce=BigInt(44),fe=BigInt(88),he=BigInt(223);function le(t){return t[0]&=252,t[55]|=128,t[56]=0,t}function pe(t,e){const i=te.p,r=(0,_t.zi)(t*t*e,i),n=(0,_t.zi)(r*t,i),s=function(t){const e=te.p,i=t*t*t%e,r=i*i*t%e,n=(0,_t.zH)(r,se,e)*r%e,s=(0,_t.zH)(n,se,e)*r%e,a=(0,_t.zH)(s,ne,e)*i%e,o=(0,_t.zH)(a,oe,e)*a%e,u=(0,_t.zH)(o,ue,e)*o%e,c=(0,_t.zH)(u,ce,e)*u%e,f=(0,_t.zH)(c,fe,e)*c%e,h=(0,_t.zH)(f,ce,e)*u%e,l=(0,_t.zH)(h,ne,e)*i%e,p=(0,_t.zH)(l,re,e)*t%e;return(0,_t.zH)(p,he,e)*l%e}((0,_t.zi)(n*r*e,i)),a=(0,_t.zi)(n*s,i),o=(0,_t.zi)(a*a,i);return{isValid:(0,_t.zi)(o*e,i)===t,value:a}}const de=(()=>(0,_t.D0)(te.p,{BITS:456,isLE:!0}))(),ye=(()=>(0,_t.D0)(te.n,{BITS:448,isLE:!0}))(),ge=Ut((()=>({...te,Fp:de,Fn:ye,hash:ie,adjustScalarBytes:le,domain:(t,e,i)=>{if(e.length>255)throw new Error("context must be smaller than 255, got: "+e.length);return(0,wt.Id)((0,wt.AI)("SigEd448"),new Uint8Array([i?1:0,e.length]),e,t)},uvRatio:pe}))());Bt(ee);const me=BigInt("39082"),be=BigInt("78163"),we=BigInt("98944233647732219769177004876929019128417576295529901074099889598043702116001257856802131563896515373927712232092845883226922417596214"),Ie=BigInt("315019913931389607337177038330951043522456072897266928557328499619017160722351061360252776265186336876723201881398623946864393857820716"),Ee=t=>pe(re,t),_e=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Ae=t=>de.create((0,Et.lX)(t)&_e);function ve(t){const{d:e}=ge.CURVE,i=de.ORDER,r=de.create,n=r(-t*t),s=r(e*(n-re)),a=r((s+re)*(s-n)),{isValid:o,value:u}=pe(be,r((n+re)*a));let c=u;o||(c=r(t*u));let f=re;o||(f=r(-re));const h=r(c*(n+re));let l=h;(0,_t.dQ)(h,i)&&(l=r(-h));const p=h*h,d=r(l*ne),y=r(p+re),g=r(p-re),m=r(c*h*(n-re)*be+f);return new ge.Point(r(d*m),r(g*y),r(y*m),r(d*g))}class Te extends Ot{constructor(t){super(t)}static fromAffine(t){return new Te(ge.Point.fromAffine(t))}assertSame(t){if(!(t instanceof Te))throw new Error("DecafPoint expected")}init(t){return new Te(t)}static hashToCurve(t){return function(t){(0,wt.DO)(t,112);const e=ve(Ae(t.slice(0,56))),i=ve(Ae(t.slice(56,112)));return new Te(e.add(i))}((0,Et.qj)("decafHash",t,112))}static fromBytes(t){(0,wt.DO)(t,56);const{d:e}=ge.CURVE,i=de.ORDER,r=de.create,n=Ae(t);if(!(0,Et.ex)((0,Et.z)(n,56),t)||(0,_t.dQ)(n,i))throw new Error("invalid decaf448 encoding 1");const s=r(n*n),a=r(re+s),o=r(a*a),u=r(o-ae*e*s),{isValid:c,value:f}=Ee(r(u*o));let h=r((n+n)*f*a*we);(0,_t.dQ)(h,i)&&(h=r(-h));const l=r(h*f*u*Ie),p=r((re-s)*f*a),d=r(l*p);if(!c)throw new Error("invalid decaf448 encoding 2");return new Te(new ge.Point(l,p,re,d))}static fromHex(t){return Te.fromBytes((0,Et.qj)("decafHex",t,56))}static msm(t,e){return(0,It.Xf)(Te,ye,t,e)}toBytes(){const{X:t,Z:e,T:i}=this.ep,r=de.ORDER,n=de.create,s=n(n(t+i)*n(t-i)),a=n(t*t),{value:o}=Ee(n(s*me*a));let u=n(o*s*we);(0,_t.dQ)(u,r)&&(u=n(-u));const c=n(Ie*u*e-i);let f=n(me*o*t*c);return(0,_t.dQ)(f,r)&&(f=n(-f)),(0,Et.z)(f,56)}equals(t){this.assertSame(t);const{X:e,Y:i}=this.ep,{X:r,Y:n}=t.ep,s=de.create;return s(e*n)===s(i*r)}is0(){return this.equals(Te.ZERO)}}Te.BASE=(()=>new Te(ge.Point.BASE).multiplyUnsafe(ne))(),Te.ZERO=(()=>new Te(ge.Point.ZERO))(),Te.Fp=de,Te.Fn=ye;const Se=()=>{const t=new Uint8Array(32);return crypto.getRandomValues(t),t.buffer},Be=t=>Y.Buffer.from(t).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");function Oe(t){if("string"!=typeof t)return t;const[,e]=t.split(".");if(!e)throw new Error("Invalid JWT: Missing payload");const i=JSON.parse(atob(e)),{exp:r,public_key:n,session_type:s,user_id:a,organization_id:o}=i;if(!(r&&n&&s&&a&&o))throw new Error("JWT payload missing required fields");return{sessionType:s,userId:a,organizationId:o,expiry:r,token:n}}Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));class Ue{constructor(t){this.getActivity=async t=>{let e=await R(v.Session);return e=Oe(e),this.request("/public/v1/query/get_activity",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetActivity=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/get_activity",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getApiKey=async t=>{let e=await R(v.Session);return e=Oe(e),this.request("/public/v1/query/get_api_key",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetApiKey=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/get_api_key",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getApiKeys=async(t={})=>{let e=await R(v.Session);return e=Oe(e),this.request("/public/v1/query/get_api_keys",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetApiKeys=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/get_api_keys",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getAttestationDocument=async t=>{let e=await R(v.Session);return e=Oe(e),this.request("/public/v1/query/get_attestation",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetAttestationDocument=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/get_attestation",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getAuthenticator=async t=>{let e=await R(v.Session);return e=Oe(e),this.request("/public/v1/query/get_authenticator",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetAuthenticator=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/get_authenticator",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getAuthenticators=async t=>{let e=await R(v.Session);return e=Oe(e),this.request("/public/v1/query/get_authenticators",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetAuthenticators=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/get_authenticators",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getOauthProviders=async t=>{let e=await R(v.Session);return e=Oe(e),this.request("/public/v1/query/get_oauth_providers",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetOauthProviders=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/get_oauth_providers",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getOrganization=async(t={})=>{let e=await R(v.Session);return e=Oe(e),this.request("/public/v1/query/get_organization",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetOrganization=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/get_organization",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getOrganizationConfigs=async t=>{let e=await R(v.Session);return e=Oe(e),this.request("/public/v1/query/get_organization_configs",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetOrganizationConfigs=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/get_organization_configs",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getPolicy=async t=>{let e=await R(v.Session);return e=Oe(e),this.request("/public/v1/query/get_policy",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetPolicy=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/get_policy",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getPrivateKey=async t=>{let e=await R(v.Session);return e=Oe(e),this.request("/public/v1/query/get_private_key",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetPrivateKey=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/get_private_key",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getUser=async t=>{let e=await R(v.Session);return e=Oe(e),this.request("/public/v1/query/get_user",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetUser=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/get_user",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getWallet=async t=>{let e=await R(v.Session);return e=Oe(e),this.request("/public/v1/query/get_wallet",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetWallet=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/get_wallet",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getWalletAccount=async t=>{let e=await R(v.Session);return e=Oe(e),this.request("/public/v1/query/get_wallet_account",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetWalletAccount=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/get_wallet_account",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getActivities=async(t={})=>{let e=await R(v.Session);return e=Oe(e),this.request("/public/v1/query/list_activities",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetActivities=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/list_activities",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getPolicies=async(t={})=>{let e=await R(v.Session);return e=Oe(e),this.request("/public/v1/query/list_policies",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetPolicies=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/list_policies",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.listPrivateKeyTags=async t=>{let e=await R(v.Session);return e=Oe(e),this.request("/public/v1/query/list_private_key_tags",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampListPrivateKeyTags=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/list_private_key_tags",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getPrivateKeys=async(t={})=>{let e=await R(v.Session);return e=Oe(e),this.request("/public/v1/query/list_private_keys",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetPrivateKeys=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/list_private_keys",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getSubOrgIds=async(t={})=>{let e=await R(v.Session);return e=Oe(e),this.request("/public/v1/query/list_suborgs",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetSubOrgIds=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/list_suborgs",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.listUserTags=async(t={})=>{let e=await R(v.Session);return e=Oe(e),this.request("/public/v1/query/list_user_tags",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampListUserTags=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/list_user_tags",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getUsers=async(t={})=>{let e=await R(v.Session);return e=Oe(e),this.request("/public/v1/query/list_users",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetUsers=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/list_users",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getVerifiedSubOrgIds=async t=>{let e=await R(v.Session);return e=Oe(e),this.request("/public/v1/query/list_verified_suborgs",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetVerifiedSubOrgIds=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/list_verified_suborgs",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getWalletAccounts=async t=>{let e=await R(v.Session);return e=Oe(e),this.request("/public/v1/query/list_wallet_accounts",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetWalletAccounts=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/list_wallet_accounts",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getWallets=async(t={})=>{let e=await R(v.Session);return e=Oe(e),this.request("/public/v1/query/list_wallets",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetWallets=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/list_wallets",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getWhoami=async(t={})=>{let e=await R(v.Session);return e=Oe(e),this.request("/public/v1/query/whoami",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetWhoami=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/whoami",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.approveActivity=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.activityDecision("/public/v1/submit/approve_activity",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_APPROVE_ACTIVITY"})},this.stampApproveActivity=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/approve_activity",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.createApiKeys=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/create_api_keys",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_CREATE_API_KEYS_V2"},"createApiKeysResult")},this.stampCreateApiKeys=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/create_api_keys",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.createApiOnlyUsers=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/create_api_only_users",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_CREATE_API_ONLY_USERS"},"createApiOnlyUsersResult")},this.stampCreateApiOnlyUsers=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/create_api_only_users",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.createAuthenticators=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/create_authenticators",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_CREATE_AUTHENTICATORS_V2"},"createAuthenticatorsResult")},this.stampCreateAuthenticators=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/create_authenticators",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.createInvitations=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/create_invitations",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_CREATE_INVITATIONS"},"createInvitationsResult")},this.stampCreateInvitations=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/create_invitations",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.createOauthProviders=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/create_oauth_providers",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_CREATE_OAUTH_PROVIDERS"},"createOauthProvidersResult")},this.stampCreateOauthProviders=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/create_oauth_providers",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.createPolicies=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/create_policies",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_CREATE_POLICIES"},"createPoliciesResult")},this.stampCreatePolicies=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/create_policies",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.createPolicy=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/create_policy",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_CREATE_POLICY_V3"},"createPolicyResult")},this.stampCreatePolicy=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/create_policy",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.createPrivateKeyTag=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/create_private_key_tag",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_CREATE_PRIVATE_KEY_TAG"},"createPrivateKeyTagResult")},this.stampCreatePrivateKeyTag=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/create_private_key_tag",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.createPrivateKeys=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/create_private_keys",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_CREATE_PRIVATE_KEYS_V2"},"createPrivateKeysResultV2")},this.stampCreatePrivateKeys=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/create_private_keys",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.createReadOnlySession=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/create_read_only_session",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_CREATE_READ_ONLY_SESSION"},"createReadOnlySessionResult")},this.stampCreateReadOnlySession=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/create_read_only_session",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.createReadWriteSession=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/create_read_write_session",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_CREATE_READ_WRITE_SESSION_V2"},"createReadWriteSessionResultV2")},this.stampCreateReadWriteSession=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/create_read_write_session",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.createSubOrganization=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/create_sub_organization",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_CREATE_SUB_ORGANIZATION_V7"},"createSubOrganizationResultV7")},this.stampCreateSubOrganization=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/create_sub_organization",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.createUserTag=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/create_user_tag",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_CREATE_USER_TAG"},"createUserTagResult")},this.stampCreateUserTag=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/create_user_tag",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.createUsers=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/create_users",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_CREATE_USERS_V3"},"createUsersResult")},this.stampCreateUsers=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/create_users",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.createWallet=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/create_wallet",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_CREATE_WALLET"},"createWalletResult")},this.stampCreateWallet=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/create_wallet",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.createWalletAccounts=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/create_wallet_accounts",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_CREATE_WALLET_ACCOUNTS"},"createWalletAccountsResult")},this.stampCreateWalletAccounts=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/create_wallet_accounts",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.deleteApiKeys=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/delete_api_keys",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_DELETE_API_KEYS"},"deleteApiKeysResult")},this.stampDeleteApiKeys=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/delete_api_keys",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.deleteAuthenticators=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/delete_authenticators",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_DELETE_AUTHENTICATORS"},"deleteAuthenticatorsResult")},this.stampDeleteAuthenticators=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/delete_authenticators",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.deleteInvitation=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/delete_invitation",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_DELETE_INVITATION"},"deleteInvitationResult")},this.stampDeleteInvitation=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/delete_invitation",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.deleteOauthProviders=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/delete_oauth_providers",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_DELETE_OAUTH_PROVIDERS"},"deleteOauthProvidersResult")},this.stampDeleteOauthProviders=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/delete_oauth_providers",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.deletePolicy=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/delete_policy",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_DELETE_POLICY"},"deletePolicyResult")},this.stampDeletePolicy=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/delete_policy",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.deletePrivateKeyTags=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/delete_private_key_tags",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_DELETE_PRIVATE_KEY_TAGS"},"deletePrivateKeyTagsResult")},this.stampDeletePrivateKeyTags=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/delete_private_key_tags",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.deletePrivateKeys=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/delete_private_keys",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_DELETE_PRIVATE_KEYS"},"deletePrivateKeysResult")},this.stampDeletePrivateKeys=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/delete_private_keys",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.deleteSubOrganization=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/delete_sub_organization",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_DELETE_SUB_ORGANIZATION"},"deleteSubOrganizationResult")},this.stampDeleteSubOrganization=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/delete_sub_organization",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.deleteUserTags=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/delete_user_tags",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_DELETE_USER_TAGS"},"deleteUserTagsResult")},this.stampDeleteUserTags=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/delete_user_tags",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.deleteUsers=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/delete_users",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_DELETE_USERS"},"deleteUsersResult")},this.stampDeleteUsers=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/delete_users",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.deleteWallets=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/delete_wallets",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_DELETE_WALLETS"},"deleteWalletsResult")},this.stampDeleteWallets=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/delete_wallets",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.emailAuth=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/email_auth",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_EMAIL_AUTH_V2"},"emailAuthResult")},this.stampEmailAuth=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/email_auth",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.exportPrivateKey=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/export_private_key",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_EXPORT_PRIVATE_KEY"},"exportPrivateKeyResult")},this.stampExportPrivateKey=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/export_private_key",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.exportWallet=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/export_wallet",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_EXPORT_WALLET"},"exportWalletResult")},this.stampExportWallet=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/export_wallet",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.exportWalletAccount=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/export_wallet_account",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_EXPORT_WALLET_ACCOUNT"},"exportWalletAccountResult")},this.stampExportWalletAccount=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/export_wallet_account",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.importPrivateKey=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/import_private_key",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_IMPORT_PRIVATE_KEY"},"importPrivateKeyResult")},this.stampImportPrivateKey=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/import_private_key",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.importWallet=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/import_wallet",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_IMPORT_WALLET"},"importWalletResult")},this.stampImportWallet=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/import_wallet",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.initFiatOnRamp=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/init_fiat_on_ramp",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_INIT_FIAT_ON_RAMP"},"initFiatOnRampResult")},this.stampInitFiatOnRamp=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/init_fiat_on_ramp",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.initImportPrivateKey=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/init_import_private_key",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_INIT_IMPORT_PRIVATE_KEY"},"initImportPrivateKeyResult")},this.stampInitImportPrivateKey=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/init_import_private_key",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.initImportWallet=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/init_import_wallet",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_INIT_IMPORT_WALLET"},"initImportWalletResult")},this.stampInitImportWallet=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/init_import_wallet",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.initOtp=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/init_otp",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_INIT_OTP"},"initOtpResult")},this.stampInitOtp=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/init_otp",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.initOtpAuth=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/init_otp_auth",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_INIT_OTP_AUTH_V2"},"initOtpAuthResultV2")},this.stampInitOtpAuth=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/init_otp_auth",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.initUserEmailRecovery=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/init_user_email_recovery",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_INIT_USER_EMAIL_RECOVERY"},"initUserEmailRecoveryResult")},this.stampInitUserEmailRecovery=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/init_user_email_recovery",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.oauth=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/oauth",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_OAUTH"},"oauthResult")},this.stampOauth=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/oauth",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.oauthLogin=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/oauth_login",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_OAUTH_LOGIN"},"oauthLoginResult")},this.stampOauthLogin=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/oauth_login",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.otpAuth=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/otp_auth",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_OTP_AUTH"},"otpAuthResult")},this.stampOtpAuth=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/otp_auth",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.otpLogin=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/otp_login",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_OTP_LOGIN"},"otpLoginResult")},this.stampOtpLogin=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/otp_login",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.recoverUser=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/recover_user",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_RECOVER_USER"},"recoverUserResult")},this.stampRecoverUser=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/recover_user",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.rejectActivity=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.activityDecision("/public/v1/submit/reject_activity",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_REJECT_ACTIVITY"})},this.stampRejectActivity=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/reject_activity",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.removeOrganizationFeature=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/remove_organization_feature",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_REMOVE_ORGANIZATION_FEATURE"},"removeOrganizationFeatureResult")},this.stampRemoveOrganizationFeature=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/remove_organization_feature",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.setOrganizationFeature=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/set_organization_feature",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_SET_ORGANIZATION_FEATURE"},"setOrganizationFeatureResult")},this.stampSetOrganizationFeature=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/set_organization_feature",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.signRawPayload=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/sign_raw_payload",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_SIGN_RAW_PAYLOAD_V2"},"signRawPayloadResult")},this.stampSignRawPayload=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/sign_raw_payload",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.signRawPayloads=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/sign_raw_payloads",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_SIGN_RAW_PAYLOADS"},"signRawPayloadsResult")},this.stampSignRawPayloads=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/sign_raw_payloads",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.signTransaction=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/sign_transaction",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_SIGN_TRANSACTION_V2"},"signTransactionResult")},this.stampSignTransaction=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/sign_transaction",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.stampLogin=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/stamp_login",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_STAMP_LOGIN"},"stampLoginResult")},this.stampStampLogin=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/stamp_login",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.updatePolicy=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/update_policy",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_UPDATE_POLICY_V2"},"updatePolicyResultV2")},this.stampUpdatePolicy=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/update_policy",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.updatePrivateKeyTag=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/update_private_key_tag",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_UPDATE_PRIVATE_KEY_TAG"},"updatePrivateKeyTagResult")},this.stampUpdatePrivateKeyTag=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/update_private_key_tag",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.updateRootQuorum=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/update_root_quorum",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_UPDATE_ROOT_QUORUM"},"updateRootQuorumResult")},this.stampUpdateRootQuorum=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/update_root_quorum",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.updateUser=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/update_user",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_UPDATE_USER"},"updateUserResult")},this.stampUpdateUser=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/update_user",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.updateUserEmail=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/update_user_email",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_UPDATE_USER_EMAIL"},"updateUserEmailResult")},this.stampUpdateUserEmail=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/update_user_email",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.updateUserName=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/update_user_name",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_UPDATE_USER_NAME"},"updateUserNameResult")},this.stampUpdateUserName=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/update_user_name",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.updateUserPhoneNumber=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/update_user_phone_number",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_UPDATE_USER_PHONE_NUMBER"},"updateUserPhoneNumberResult")},this.stampUpdateUserPhoneNumber=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/update_user_phone_number",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.updateUserTag=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/update_user_tag",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_UPDATE_USER_TAG"},"updateUserTagResult")},this.stampUpdateUserTag=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/update_user_tag",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.updateWallet=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/update_wallet",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_UPDATE_WALLET"},"updateWalletResult")},this.stampUpdateWallet=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/update_wallet",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.verifyOtp=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await R(v.Session);return n=Oe(n),this.command("/public/v1/submit/verify_otp",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_VERIFY_OTP"},"verifyOtpResult")},this.stampVerifyOtp=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/verify_otp",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.testRateLimits=async t=>{let e=await R(v.Session);return e=Oe(e),this.request("/tkhq/api/v1/test_rate_limits",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampTestRateLimits=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/tkhq/api/v1/test_rate_limits",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.config=t,t.stamper&&(this.stamper=t.stamper)}async request(t,e){const i=this.config.apiBaseUrl+t,r=JSON.stringify(e);var n={"X-Client-Version":"@turnkey/sdk-browser@5.3.3"};if(this.stamper){const t=await this.stamper.stamp(r);n[t.stampHeaderName]=t.stampHeaderValue}this.config.readOnlySession&&(n["X-Session"]=this.config.readOnlySession);const s=await fetch(i,{method:"POST",headers:n,body:r,redirect:"follow"});if(!s.ok){let t;try{t=await s.json()}catch(t){throw new Error(`${s.status} ${s.statusText}`)}throw new O(t)}return await s.json()}async command(t,e,i){const r=this.config.activityPoller?.intervalMs??1e3,n=this.config.activityPoller?.numRetries??3,s=t=>{const{result:e,status:r}=t.activity;return"ACTIVITY_STATUS_COMPLETED"===r?{...e[`${i}`],...t}:t};let a=0;const o=async t=>{const e={activityId:t},i=await this.getActivity(e);return a>n?s(i):(a+=1,p.includes(i.activity.status)?s(i):(await(u=r,new Promise(t=>setTimeout(t,u))),o(t)));var u},u=await this.request(t,e);return p.includes(u.activity.status)?s(u):o(u.activity.id)}async activityDecision(t,e){const i=await this.request(t,e);return{...i.activity.result,...i}}}class ze extends Ue{constructor(t,e){super(t),this.authClient=e}}const Re="900";var xe=a(6862);class Pe extends ze{constructor(t,e){super(t,e),this.login=async t=>{const e=await this.createReadOnlySession(t||{}),i={sessionType:C.READ_ONLY,userId:e.userId,organizationId:e.organizationId,expiry:Number(e.sessionExpiry),token:e.session};return await P(i,this.authClient),e},this.refreshSession=async({sessionType:t=C.READ_WRITE,expirationSeconds:e=Re,invalidateExisting:i=!1,publicKey:r}={})=>{try{switch(t){case C.READ_ONLY:{if(!(this instanceof Ce))throw new Error("You must use a passkey client to refresh a read-only session.");const t=await this.createReadOnlySession({}),e={sessionType:C.READ_ONLY,userId:t.userId,organizationId:t.organizationId,expiry:Number(t.sessionExpiry),token:t.session};return void await P(e,A.Passkey)}case C.READ_WRITE:if(this instanceof De){let t,n=r;if(!r){t=await crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign","verify"]);const e=new Uint8Array(await crypto.subtle.exportKey("raw",t.publicKey));n=(0,xe.pD)((0,xe.JD)(e))}const s=await this.stampLogin({publicKey:n,expirationSeconds:e,invalidateExisting:i});return await this.resetKeyPair(t),void await P(s.session,A.IndexedDb)}if(this instanceof Ne){const t=r??await this.getEmbeddedPublicKey();if(!t)throw new Error("Unable to refresh session: missing target public key.");const n=await this.createReadWriteSession({targetPublicKey:t,expirationSeconds:e,invalidateExisting:i}),s={sessionType:C.READ_WRITE,userId:n.userId,organizationId:n.organizationId,expiry:Date.now()+1e3*Number(e),token:n.credentialBundle};return await this.injectCredentialBundle(s.token),void await P(s,A.Iframe)}throw new Error("Unsupported client type for read-write session refresh.");default:throw new Error(`Invalid session type passed: ${t}`)}}catch(t){throw new Error(`Unable to refresh session: ${t}`)}},this.loginWithBundle=async t=>{const{bundle:e,expirationSeconds:i=Re}=t;if(!(this instanceof Ne))throw new Error("You must use an iframe client to log in with a session.");await this.injectCredentialBundle(e);const r=await this.getWhoami(),n={sessionType:C.READ_WRITE,userId:r.userId,organizationId:r.organizationId,expiry:Date.now()+1e3*Number(i),token:e};await P(n,A.Iframe)},this.loginWithSession=async t=>{if(!(this instanceof De))throw new Error("You must use an indexedDb client to log in with a session.");await P(t,A.IndexedDb)},this.loginWithPasskey=async t=>{try{const{sessionType:e=C.READ_WRITE,publicKey:i,expirationSeconds:r=Re}=t;if(e===C.READ_ONLY){const t=await this.createReadOnlySession({}),e={sessionType:C.READ_ONLY,userId:t.userId,organizationId:t.organizationId,expiry:Number(t.sessionExpiry),token:t.session};await P(e,A.Passkey)}else{if(e!==C.READ_WRITE)throw new Error(`Invalid session type passed: ${e}`);{if(!i)throw new Error("You must provide a publicKey to create a passkey read write session.");const t=await this.stampLogin({publicKey:i,expirationSeconds:r});await P(t.session,A.IndexedDb)}}}catch(t){throw new Error(`Unable to log in with the provided passkey: ${t}`)}},this.loginWithWallet=async t=>{try{const{sessionType:e=C.READ_WRITE,publicKey:i,expirationSeconds:r=Re}=t;if(e===C.READ_ONLY){const t=await this.createReadOnlySession({}),e={sessionType:C.READ_ONLY,userId:t.userId,organizationId:t.organizationId,expiry:Number(t.sessionExpiry),token:t.session};await P(e,A.Wallet)}else{if(e!==C.READ_WRITE)throw new Error(`Invalid session type passed: ${e}`);{if(!i)throw new Error("You must provide a publicKey to create a read-write session.");const t=await this.stampLogin({publicKey:i,expirationSeconds:r});await P(t.session,A.IndexedDb)}}}catch(t){throw new Error(`Unable to log in with the provided wallet: ${t}`)}},this.deleteUserAuth=async t=>{try{const{userId:e,phoneNumber:i,email:r,authenticatorIds:n,oauthProviderIds:s,apiKeyIds:a}=t,o=[];return i&&o.push(this.updateUser({userId:e,userPhoneNumber:"",userTagIds:[]})),r&&o.push(this.updateUser({userId:e,userEmail:"",userTagIds:[]})),n&&n.length>0&&o.push(this.deleteAuthenticators({userId:e,authenticatorIds:n})),s&&s.length>0&&o.push(this.deleteOauthProviders({userId:e,providerIds:s})),a&&a.length>0&&o.push(this.deleteApiKeys({userId:e,apiKeyIds:a})),await Promise.all(o)}catch(t){throw t}},this.addUserAuth=async t=>{try{const{userId:e,phoneNumber:i,email:r,authenticators:n,oauthProviders:s,apiKeys:a}=t,o=[];return i&&o.push(this.updateUser({userId:e,userPhoneNumber:i,userTagIds:[]})),r&&o.push(this.updateUser({userId:e,userEmail:r,userTagIds:[]})),n&&n.length>0&&o.push(this.createAuthenticators({userId:e,authenticators:n})),s&&s.length>0&&o.push(this.createOauthProviders({userId:e,oauthProviders:s})),a&&a.length>0&&o.push(this.createApiKeys({userId:e,apiKeys:a})),await Promise.all(o)}catch(t){throw t}}}async updateUserAuth(t){try{const{userId:e,phoneNumber:i,email:r,authenticators:n,oauthProviders:s,apiKeys:a}=t,o=[],u={};return void 0!==i&&(u.userPhoneNumber=null===i?"":i),void 0!==r&&(u.userEmail=null===r?"":r),Object.keys(u).length>0&&o.push(this.updateUser({userId:e,...u,userTagIds:[]})),n&&(n.add?.length&&o.push(this.createAuthenticators({userId:e,authenticators:n.add})),n.deleteIds?.length&&o.push(this.deleteAuthenticators({userId:e,authenticatorIds:n.deleteIds}))),s&&(s.add?.length&&o.push(this.createOauthProviders({userId:e,oauthProviders:s.add})),s.deleteIds?.length&&o.push(this.deleteOauthProviders({userId:e,providerIds:s.deleteIds}))),a&&(a.add?.length&&o.push(this.createApiKeys({userId:e,apiKeys:a.add})),a.deleteIds?.length&&o.push(this.deleteApiKeys({userId:e,apiKeyIds:a.deleteIds}))),await Promise.all(o),!0}catch(t){throw t}}}class Ce extends Pe{constructor(t){super(t,A.Passkey),this.createUserPasskey=async(t={})=>{const e=Se(),i=Be(e),r=Se(),n={publicKey:{rp:{id:t.publicKey?.rp?.id??this.rpId,name:t.publicKey?.rp?.name??""},challenge:t.publicKey?.challenge??e,pubKeyCredParams:t.publicKey?.pubKeyCredParams??[{type:"public-key",alg:-7},{type:"public-key",alg:-257}],user:{id:t.publicKey?.user?.id??r,name:t.publicKey?.user?.name??"Default User",displayName:t.publicKey?.user?.displayName??"Default User"},authenticatorSelection:{authenticatorAttachment:t.publicKey?.authenticatorSelection?.authenticatorAttachment??void 0,requireResidentKey:t.publicKey?.authenticatorSelection?.requireResidentKey??!0,residentKey:t.publicKey?.authenticatorSelection?.residentKey??"required",userVerification:t.publicKey?.authenticatorSelection?.userVerification??"preferred"}}},s=await l(n);return{encodedChallenge:t.publicKey?.challenge?Be(t.publicKey?.challenge):i,attestation:s}},this.rpId=this.stamper.rpId}}class Ne extends Pe{constructor(t){super(t,A.Iframe),this.injectCredentialBundle=async t=>await this.stamper.injectCredentialBundle(t),this.injectWalletExportBundle=async(t,e)=>await this.stamper.injectWalletExportBundle(t,e),this.injectKeyExportBundle=async(t,e,i)=>await this.stamper.injectKeyExportBundle(t,e,i),this.injectImportBundle=async(t,e,i)=>await this.stamper.injectImportBundle(t,e,i),this.extractWalletEncryptedBundle=async()=>await this.stamper.extractWalletEncryptedBundle(),this.extractKeyEncryptedBundle=async t=>await this.stamper.extractKeyEncryptedBundle(t),this.getEmbeddedPublicKey=async()=>await this.stamper.getEmbeddedPublicKey(),this.clearEmbeddedKey=async()=>await this.stamper.clearEmbeddedKey(),this.initEmbeddedKey=async()=>await this.stamper.initEmbeddedKey(),this.iframePublicKey=this.stamper.iframePublicKey}}class De extends Pe{constructor(t){super(t,A.IndexedDb),this.clear=async()=>await this.stamper.clear(),this.getPublicKey=async()=>await this.stamper.getPublicKey(),this.init=async()=>await this.stamper.init(),this.resetKeyPair=async t=>await this.stamper.resetKeyPair(t)}}window.Turnkey={TurnkeyBrowserClient:Pe,IframeStamper:class{constructor(t){if("undefined"==typeof window)throw new Error("Cannot initialize iframe in non-browser environment");if("undefined"==typeof MessageChannel)throw new Error("Cannot initialize iframe without MessageChannel support");if(!t.iframeContainer)throw new Error("Iframe container cannot be found");if(this.container=t.iframeContainer,this.container.querySelector(`#${t.iframeElementId}`))throw new Error(`Iframe element with ID ${t.iframeElementId} already exists`);let e=window.document.createElement("iframe");e.setAttribute("sandbox","allow-scripts allow-same-origin"),e.id=t.iframeElementId,e.src=t.iframeUrl,this.iframe=e;const i=new URL(t.iframeUrl);this.iframeOrigin=i.origin,this.iframePublicKey=null,this.messageChannel=new MessageChannel,this.pendingRequests=new Map}onMessageHandler(t){const{type:e,value:i,requestId:r}=t.data||{};if(!r)return e===d.PublicKeyReady?void(this.iframePublicKey=i):void 0;const n=this.pendingRequests.get(r);n?(this.pendingRequests.delete(r),e!==d.Error?e===d.Stamp?n.resolve({stampHeaderName:"X-Stamp",stampHeaderValue:i}):n.resolve(i):n.reject(new Error(i))):console.warn(`Received response for unknown request: ${r}`)}async init(t){return new Promise((e,i)=>{this.container.appendChild(this.iframe),this.iframe.addEventListener("load",()=>{this.iframe.contentWindow?.postMessage?this.iframe.contentWindow.postMessage({type:d.TurnkeyInitMessageChannel,dangerouslyOverrideIframeKeyTtl:t},this.iframeOrigin,[this.messageChannel.port2]):i(new Error("contentWindow or contentWindow.postMessage does not exist"))}),this.messageChannel.port1.onmessage=t=>{t.data?.type===d.PublicKeyReady&&(this.iframePublicKey=t.data.value,e(t.data.value)),this.onMessageHandler(t)}})}clear(){this.messageChannel?.port1?.close(),this.messageChannel?.port2?.close(),this.iframe.remove(),this.pendingRequests.clear()}publicKey(){return this.iframePublicKey}async getEmbeddedPublicKey(){const t=await this.createRequest(d.GetEmbeddedPublicKey);return this.iframePublicKey=t,t}async clearEmbeddedKey(){return await this.createRequest(d.ClearEmbeddedKey),this.iframePublicKey="",null}async initEmbeddedKey(){const t=await this.createRequest(d.InitEmbeddedKey);return this.iframePublicKey=t,t}createRequest(t,e={}){return new Promise((i,r)=>{const n=crypto.randomUUID();this.pendingRequests.set(n,{resolve:i,reject:r,requestId:n}),this.messageChannel.port1.postMessage({type:t,requestId:n,...e})})}async injectCredentialBundle(t){return this.createRequest(d.InjectCredentialBundle,{value:t})}async injectKeyExportBundle(t,e,i){return this.createRequest(d.InjectKeyExportBundle,{value:t,keyFormat:i,organizationId:e})}async injectWalletExportBundle(t,e){return this.createRequest(d.InjectWalletExportBundle,{value:t,organizationId:e})}async injectImportBundle(t,e,i){return this.createRequest(d.InjectImportBundle,{value:t,organizationId:e,userId:i})}async extractWalletEncryptedBundle(){return this.createRequest(d.ExtractWalletEncryptedBundle)}async extractKeyEncryptedBundle(t){return this.createRequest(d.ExtractKeyEncryptedBundle,{keyFormat:t})}async applySettings(t){return this.createRequest(d.ApplySettings,{value:JSON.stringify(t)})}async stamp(t){if(null===this.iframePublicKey)throw new Error("null iframe public key. Have you called/awaited .init()?");return this.createRequest(d.StampRequest,{value:t})}},getWebAuthnAttestation:l}})()})();